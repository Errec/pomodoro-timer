function addZero(e){return e>9?""+e:"0"+e}var setBreak=function(){function e(){a.textContent=5===o?"05 min":o.toString()+" min"}function t(){60===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function i(){return o}var o=5,a=document.getElementById("break-input"),r=document.getElementById("break-increase"),s=document.getElementById("break-decrease");return r.addEventListener("click",t),s.addEventListener("click",n),e(),{getValue:i}}(),setSession=function(){function e(){a.textContent=5===o?"05 min":o.toString()+" min"}function t(){360===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function i(){return o}var o=5,a=document.getElementById("session-input"),r=document.getElementById("session-increase"),s=document.getElementById("session-decrease");return r.addEventListener("click",t),s.addEventListener("click",n),e(),{getValue:i}}(),timeMarkers=function(){function e(){t.textContent=addZero(Math.floor(setSession.getValue()/5*1)).toString()+" min",n.textContent=addZero(Math.floor(setSession.getValue()/5*2)).toString()+" min",i.textContent=addZero(Math.floor(setSession.getValue()/5*3)).toString()+" min",o.textContent=addZero(Math.floor(setSession.getValue()/5*4)).toString()+" min",a.textContent=addZero(Math.floor(setSession.getValue()/5*5)).toString()+" min"}var t=document.getElementById("time-mark-0"),n=document.getElementById("time-mark-1"),i=document.getElementById("time-mark-2"),o=document.getElementById("time-mark-3"),a=document.getElementById("time-mark-4"),r=document.getElementById("session-increase"),s=document.getElementById("session-decrease");r.addEventListener("click",e),s.addEventListener("click",e)}(),timer=function(){function e(e,t){var n=document.getElementById("rect"+e),i=new RegExp("(^| )rect-animate-color($| )","g");"session"===t?n.className+=" rect-animate-color":n.className=n.className.replace(i," ")}function t(){u?(u=!1,E.style.backgroundImage="url(../img/reload-icon.svg)",i()):(u=!0,E.style.backgroundImage="url(../img/play-icon.svg)",n())}function n(){o(!1),m=!1,r=!1,clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(l),displayValue=setSession.getValue();for(var t=0;t<=a;t++)e(t,"reset")}function i(){var t=setSession.getValue(),n=setBreak.getValue(),u=t/a,f=n/a,E=0,y=0;r=!0,m||o(!0),s=setInterval(function(){E<=a&&(e(E,"session"),E++)},u*g),d=setTimeout(function(){c=setInterval(function(){y<=a&&(e(y,"break"),y++)},f*g)},t*g),l=setTimeout(function(){clearTimeout(s),clearTimeout(d),clearTimeout(c),r&&i()},(t+n)*g)}function o(e){!1===e?(y.disabled=!1,I.disabled=!1,k.disabled=!1,v.disabled=!1):(y.disabled=!0,I.disabled=!0,k.disabled=!0,v.disabled=!0)}var a=364,r=!0,s=null,d=null,c=null,l=null,m=!1,u=!0,g=6e4,f=document.getElementById("timer-wrapper"),E=document.getElementById("start-btn"),y=document.getElementById("session-increase"),I=document.getElementById("session-decrease"),k=document.getElementById("break-increase"),v=document.getElementById("break-decrease");E.addEventListener("click",t),function(){for(var e=new Date,t=e.getDay(),n=0;n<t;n++){var i=document.createElement("div");i.setAttribute("id","rect"+(a+1+n)),i.className+=" rect",f.appendChild(i)}a+=t}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZXRCcmVhay5qcyIsInNldFNlc3Npb24uanMiLCJ0aW1lTWFya2Vycy5qcyIsInRpbWVyLmpzIl0sIm5hbWVzIjpbImFkZFplcm8iLCJuIiwic2V0QnJlYWsiLCJfcmVuZGVyIiwiYnJlYWtJbnB1dCIsInRleHRDb250ZW50IiwiYnJlYWtWYWx1ZSIsInRvU3RyaW5nIiwiX2luY3JlbWVudCIsIl9kZWNyZW1lbnQiLCJnZXRWYWx1ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbmNUaW1lIiwiZGVjVGltZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRTZXNzaW9uIiwic2Vzc2lvbklucHV0Iiwic2Vzc2lvblZhbHVlIiwidGltZU1hcmtlcnMiLCJtYXJrMCIsIk1hdGgiLCJmbG9vciIsIm1hcmsxIiwibWFyazIiLCJtYXJrMyIsIm1hcms0IiwidGltZXIiLCJpZCIsInR5cGUiLCJyZWN0YW5nbGUiLCJyZWciLCJSZWdFeHAiLCJjbGFzc05hbWUiLCJyZXBsYWNlIiwiX2NvdW50ZG93blN3aXRjaCIsInBsYXlCdG4iLCJzdGFydCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiX3N0YXJ0Q291bnRkb3duIiwiX3Jlc2V0VGltZXIiLCJfZGlzYWJsZUJ0bnMiLCJkaXNhYmxlIiwicGxheU9uIiwiY2xlYXJUaW1lb3V0IiwibXlTZXNzaW9uQ291bnRkb3duIiwibXlCcmVha0NvdW50ZG93biIsIm15QnJlYWtJbm5lckNvdW50ZG93biIsImxvb3BUaW1lciIsImRpc3BsYXlWYWx1ZSIsImkiLCJOX1JFQ1QiLCJzZXNzaW9uVGltZSIsImJyZWFrVGltZSIsInJlY3RTZXNzaW9uVGltZSIsInJlY3RCcmVha1RpbWUiLCJzIiwiYiIsInNldEludGVydmFsIiwibWludXRlIiwic2V0VGltZW91dCIsInNlc3Npb25JbmNCdG4iLCJkaXNhYmxlZCIsInNlc3Npb25EZWNCdG4iLCJicmVha0luY0J0biIsImJyZWFrRGVjQnRuIiwidGltZXJXcmFwcGVyIiwiZCIsIkRhdGUiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUEsRUFBQSxHQUFBQSxFQUFBLElBQUFBLEVDREEsR0FBQUMsVUFBQSxXQVlBLFFBQUFDLEtBQ0FDLEVBQUFDLFlBQUEsSUFBQUMsRUFBQSxTQUFBQSxFQUFBQyxXQUFBLE9BR0EsUUFBQUMsS0FDQSxLQUFBRixJQUFBQSxHQUFBLEdBQ0FILElBR0EsUUFBQU0sS0FDQSxJQUFBSCxJQUFBQSxHQUFBLEdBQ0FILElBR0EsUUFBQU8sS0FDQSxNQUFBSixHQTFCQSxHQUFBQSxHQUFBLEVBRUFGLEVBQUFPLFNBQUFDLGVBQUEsZUFDQUMsRUFBQUYsU0FBQUMsZUFBQSxrQkFDQUUsRUFBQUgsU0FBQUMsZUFBQSxpQkF5QkEsT0F2QkFDLEdBQUFFLGlCQUFBLFFBQUFQLEdBQ0FNLEVBQUFDLGlCQUFBLFFBQUFOLEdBRUFOLEtBcUJBTyxTQUFBQSxNQy9CQU0sV0FBQSxXQVlBLFFBQUFiLEtBQ0FjLEVBQUFaLFlBQUEsSUFBQWEsRUFBQSxTQUFBQSxFQUFBWCxXQUFBLE9BR0EsUUFBQUMsS0FDQSxNQUFBVSxJQUFBQSxHQUFBLEdBQ0FmLElBR0EsUUFBQU0sS0FDQSxJQUFBUyxJQUFBQSxHQUFBLEdBQ0FmLElBR0EsUUFBQU8sS0FDQSxNQUFBUSxHQTFCQSxHQUFBQSxHQUFBLEVBRUFELEVBQUFOLFNBQUFDLGVBQUEsaUJBQ0FDLEVBQUFGLFNBQUFDLGVBQUEsb0JBQ0FFLEVBQUFILFNBQUFDLGVBQUEsbUJBeUJBLE9BdkJBQyxHQUFBRSxpQkFBQSxRQUFBUCxHQUNBTSxFQUFBQyxpQkFBQSxRQUFBTixHQUVBTixLQXFCQU8sU0FBQUEsTUMvQkFTLFlBQUEsV0FhQSxRQUFBaEIsS0FDQWlCLEVBQUFmLFlBQUFMLFFBQUFxQixLQUFBQyxNQUFBTixXQUFBTixXQUFBLEVB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R0FBQSxHQUFBQyxNQUNBQyxFQUFBRixFQUFBRyxTQUVBcEIsRUFBQSxFQUFBQSxFQUFBbUIsRUFBQW5CLElBQUEsQ0FDQSxHQUFBcUIsR0FBQTdELFNBQUE4RCxjQUFBLE1BQ0FELEdBQUFFLGFBQUEsS0FBQSxRQUFBdEIsRUFBQSxFQUFBRCxJQUNBcUIsRUFBQXZDLFdBQUEsUUFDQWtDLEVBQUFRLFlBQUFILEdBRUFwQixHQUFBa0IiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiICBmdW5jdGlvbiBhZGRaZXJvKG4pIHtcbiAgICByZXR1cm4gbiA+IDkgPyBcIlwiICsgbjogXCIwXCIgKyBuO1xuICB9XG4iLCJ2YXIgc2V0QnJlYWsgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIGJyZWFrVmFsdWUgPSA1O1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgYnJlYWtJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbnB1dCcpO1xuICB2YXIgaW5jVGltZSAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbmNyZWFzZScpO1xuICB2YXIgZGVjVGltZSAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1kZWNyZWFzZScpO1xuLy8gIEJpbmQgY2xpY2sgZXZlbnRzXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfaW5jcmVtZW50KTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9kZWNyZW1lbnQpO1xuLy8gUmVuZGVyIHRoZSBpbml0aWFsIHZhbHVlIGZyb20gYnJlYWtWYWx1ZVxuICBfcmVuZGVyKCk7XG5cbiAgZnVuY3Rpb24gX3JlbmRlcigpIHtcbiAgICBicmVha1ZhbHVlID09PSA1ID8gYnJlYWtJbnB1dC50ZXh0Q29udGVudCA9ICcwNSBtaW4nIDogYnJlYWtJbnB1dC50ZXh0Q29udGVudCA9IGJyZWFrVmFsdWUudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbmNyZW1lbnQoKSB7XG4gICAgYnJlYWtWYWx1ZSA9PT0gNjAgPyAnJyA6IGJyZWFrVmFsdWUgKz0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVjcmVtZW50KCkge1xuICAgIGJyZWFrVmFsdWUgPT09IDUgPyAnJyA6IGJyZWFrVmFsdWUgLT0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZSAoKSB7XG4gICAgIHJldHVybiBicmVha1ZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAgIGdldFZhbHVlIDogZ2V0VmFsdWVcbiAgfTtcblxufSkoKTtcbiIsInZhciBzZXRTZXNzaW9uID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBzZXNzaW9uVmFsdWUgPSA1O1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgc2Vzc2lvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5wdXQnKTtcbiAgdmFyIGluY1RpbWUgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuLy8gIEJpbmQgY2xpY2sgZXZlbnRzXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfaW5jcmVtZW50KTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9kZWNyZW1lbnQpO1xuLy8gUmVuZGVyIHRoZSBpbml0aWFsIHZhbHVlIGZyb20gc2Vzc2lvblZhbHVlXG4gIF9yZW5kZXIoKTtcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gNSA/IHNlc3Npb25JbnB1dC50ZXh0Q29udGVudCA9ICcwNSBtaW4nIDogc2Vzc2lvbklucHV0LnRleHRDb250ZW50ID0gc2Vzc2lvblZhbHVlLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cblxuICBmdW5jdGlvbiBfaW5jcmVtZW50KCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gMzYwID8gJycgOiBzZXNzaW9uVmFsdWUgKz0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVjcmVtZW50KCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gNSA/ICcnIDogc2Vzc2lvblZhbHVlIC09IDU7XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUgKCkge1xuICAgICByZXR1cm4gc2Vzc2lvblZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAgIGdldFZhbHVlIDogZ2V0VmFsdWVcbiAgfTtcblxufSkoKTtcbiIsInZhciB0aW1lTWFya2VycyA9IChmdW5jdGlvbigpe1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgbWFyazAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMCcpO1xuICB2YXIgbWFyazEgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMScpO1xuICB2YXIgbWFyazIgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMicpO1xuICB2YXIgbWFyazMgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMycpO1xuICB2YXIgbWFyazQgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstNCcpO1xuICB2YXIgaW5jVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcblxuICBpbmNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3JlbmRlcik7XG4gIGRlY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfcmVuZGVyKTtcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIG1hcmswLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiAxKSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrMS50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogMikpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gICAgbWFyazIudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDMpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcmszLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiA0KSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrNC50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogNSkpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cbn0pKCk7XG4iLCJ2YXIgdGltZXIgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBOX1JFQ1QgICAgICAgICAgICAgICAgPSAzNjQ7XG4gIHZhciBwbGF5T24gICAgICAgICAgICAgICAgPSB0cnVlO1xuICB2YXIgbXlTZXNzaW9uQ291bnRkb3duICAgID0gbnVsbDtcbiAgdmFyIG15QnJlYWtDb3VudGRvd24gICAgICA9IG51bGw7XG4gIHZhciBteUJyZWFrSW5uZXJDb3VudGRvd24gPSBudWxsO1xuICB2YXIgbG9vcFRpbWVyICAgICAgICAgICAgID0gbnVsbDtcbiAgdmFyIGRpc2FibGUgICAgICAgICAgICAgICA9IGZhbHNlO1xuICB2YXIgcGxheUJ0biAgICAgICAgICAgICAgID0gdHJ1ZTtcbiAgdmFyIG1pbnV0ZSAgICAgICAgICAgICAgICA9IDYwMDAwO1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgdGltZXJXcmFwcGVyICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lci13cmFwcGVyJyk7XG4gIHZhciBzdGFydCAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LWJ0bicpO1xuICB2YXIgc2Vzc2lvbkluY0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWluY3JlYXNlJyk7XG4gIHZhciBzZXNzaW9uRGVjQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcbiAgdmFyIGJyZWFrSW5jQnRuICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWstaW5jcmVhc2UnKTtcbiAgdmFyIGJyZWFrRGVjQnRuICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWstZGVjcmVhc2UnKTtcbi8vIEJpbmQgY2xpY2sgZXZlbnRzXG4gIHN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2NvdW50ZG93blN3aXRjaCk7XG4vLyBSZW5kZXIgdGhlIHRpbWVyIGRpc3BsYXlcblxuX3VwZGF0ZU51bWJlck9mUmVjdGFuZ2xlcygpO1xuXG4gIGZ1bmN0aW9uIF91cGRhdGVOdW1iZXJPZlJlY3RhbmdsZXMoKSB7XG4gICAgdmFyIGQgICAgICAgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciB3ZWVrRGF5ID0gZC5nZXREYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2Vla0RheTsgaSsrKSB7XG4gICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInJlY3RcIiArIChOX1JFQ1QgKyAxICsgaSkgKTtcbiAgICAgIGRpdi5jbGFzc05hbWUgKz0gXCIgcmVjdFwiO1xuICAgICAgdGltZXJXcmFwcGVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxuICAgIE5fUkVDVCA9IE5fUkVDVCArIHdlZWtEYXk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVuZGVyKGlkLCB0eXBlKSB7XG4gICAgdmFyIHJlY3RhbmdsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWN0JyArIGlkKTtcbiAgICB2YXIgcmVnICAgICAgID0gbmV3IFJlZ0V4cCgnKF58ICknKyAncmVjdC1hbmltYXRlLWNvbG9yJyArJygkfCApJywnZycpO1xuXG4gICAgdHlwZSA9PT0gJ3Nlc3Npb24nID8gcmVjdGFuZ2xlLmNsYXNzTmFtZSArPSBcIiByZWN0LWFuaW1hdGUtY29sb3JcIiA6IHJlY3RhbmdsZS5jbGFzc05hbWUgPSByZWN0YW5nbGUuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCcgJyk7XG4gIH1cblxuICBmdW5jdGlvbiBfY291bnRkb3duU3dpdGNoKCkge1xuICAgIGlmKHBsYXlCdG4pIHtcbiAgICAgIHBsYXlCdG4gPSBmYWxzZTtcbiAgICAgIHN0YXJ0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4uL2ltZy9yZWxvYWQtaWNvbi5zdmcpXCI7XG4gICAgICBfc3RhcnRDb3VudGRvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGxheUJ0biA9IHRydWU7XG4gICAgICBzdGFydC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCguLi9pbWcvcGxheS1pY29uLnN2ZylcIjtcbiAgICAgIF9yZXNldFRpbWVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3Jlc2V0VGltZXIoKSB7XG4gICAgX2Rpc2FibGVCdG5zKGZhbHNlKTtcbiAgICBkaXNhYmxlID0gZmFsc2U7XG4gICAgcGxheU9uID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KG15U2Vzc2lvbkNvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KG15QnJlYWtDb3VudGRvd24pO1xuICAgIGNsZWFyVGltZW91dChteUJyZWFrSW5uZXJDb3VudGRvd24pO1xuICAgIGNsZWFyVGltZW91dChsb29wVGltZXIpO1xuICAgIGRpc3BsYXlWYWx1ZSA9IHNldFNlc3Npb24uZ2V0VmFsdWUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBOX1JFQ1Q7IGkrKykge1xuICAgICAgX3JlbmRlcihpLCdyZXNldCcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydENvdW50ZG93bigpIHtcbiAgICB2YXIgc2Vzc2lvblRpbWUgICAgID0gc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpO1xuICAgIHZhciBicmVha1RpbWUgICAgICAgPSBzZXRCcmVhay5nZXRWYWx1ZSgpO1xuICAgIHZhciByZWN0U2Vzc2lvblRpbWUgPSBzZXNzaW9uVGltZSAvIE5fUkVDVDtcbiAgICB2YXIgcmVjdEJyZWFrVGltZSAgID0gIGJyZWFrVGltZSAvIE5fUkVDVDtcbiAgICB2YXIgcyAgICAgICAgICAgICAgID0gMDtcbiAgICB2YXIgYiAgICAgICAgICAgICAgID0gMDtcbiAgICBwbGF5T24gICAgICAgICAgICAgID0gdHJ1ZTtcblxuICAgIGlmKCFkaXNhYmxlKSB7XG4gICAgX2Rpc2FibGVCdG5zKHRydWUpO1xuICAgIH1cblxuICAgIG15U2Vzc2lvbkNvdW50ZG93biA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgaWYocyA8PSBOX1JFQ1QpIHtcbiAgICAgIF9yZW5kZXIocywnc2Vzc2lvbicpO1xuICAgICAgcysrO1xuICAgICAgfVxuICAgIH0sIHJlY3RTZXNzaW9uVGltZSAqIG1pbnV0ZSk7XG5cbiAgICBteUJyZWFrQ291bnRkb3duID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBteUJyZWFrSW5uZXJDb3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoYiA8PSBOX1JFQ1QpIHtcbiAgICAgICAgICBfcmVuZGVyKGIsJ2JyZWFrJyk7XG4gICAgICAgICAgYisrO1xuICAgICAgICB9XG4gICAgICB9LCByZWN0QnJlYWtUaW1lICogbWludXRlKTtcbiAgICB9LCBzZXNzaW9uVGltZSAqIG1pbnV0ZSk7XG5cbiAgICBsb29wVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KG15U2Vzc2lvbkNvdW50ZG93bik7XG4gICAgICBjbGVhclRpbWVvdXQobXlCcmVha0NvdW50ZG93bik7XG4gICAgICBjbGVhclRpbWVvdXQobXlCcmVha0lubmVyQ291bnRkb3duKTtcbiAgICAgIGlmIChwbGF5T24pIHtcbiAgICAgICAgIF9zdGFydENvdW50ZG93bigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sKHNlc3Npb25UaW1lICsgYnJlYWtUaW1lKSAqIG1pbnV0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGlzYWJsZUJ0bnMoZGlzYWJsZSkge1xuICAgIGlmKGRpc2FibGUgPT09IGZhbHNlKSB7XG4gICAgICBzZXNzaW9uSW5jQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBzZXNzaW9uRGVjQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBicmVha0luY0J0bi5kaXNhYmxlZCAgID0gZmFsc2U7XG4gICAgICBicmVha0RlY0J0bi5kaXNhYmxlZCAgID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlc3Npb25JbmNCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgc2Vzc2lvbkRlY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBicmVha0luY0J0bi5kaXNhYmxlZCAgID0gdHJ1ZTtcbiAgICAgIGJyZWFrRGVjQnRuLmRpc2FibGVkICAgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG59KSgpO1xuIl19
