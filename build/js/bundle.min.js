var setBreak=function(){function e(){a.textContent=o.toString()+" min"}function t(){60===o||o++,e()}function n(){1===o||o--,e()}function i(){return o}var o=1,a=document.getElementById("break-input"),s=document.getElementById("break-increase"),r=document.getElementById("break-decrease");return s.addEventListener("click",t),r.addEventListener("click",n),e(),{getValue:i}}(),setSession=function(){function e(){a.textContent=o.toString()+" min"}function t(){360===o||o++,e()}function n(){1===o||o--,e()}function i(){return o}var o=1,a=document.getElementById("session-input"),s=document.getElementById("session-increase"),r=document.getElementById("session-decrease");return s.addEventListener("click",t),r.addEventListener("click",n),e(),{getValue:i}}(),timeMarkers=function(){function e(){t.textContent=Math.floor(setSession.getValue()/5*1).toString()+" min",n.textContent=Math.floor(setSession.getValue()/5*2).toString()+" min",i.textContent=Math.floor(setSession.getValue()/5*3).toString()+" min",o.textContent=Math.floor(setSession.getValue()/5*4).toString()+" min",a.textContent=Math.floor(setSession.getValue()/5*5).toString()+" min"}var t=document.getElementById("time-mark-0"),n=document.getElementById("time-mark-1"),i=document.getElementById("time-mark-2"),o=document.getElementById("time-mark-3"),a=document.getElementById("time-mark-4"),s=document.getElementById("session-increase"),r=document.getElementById("session-decrease");s.addEventListener("click",e),r.addEventListener("click",e)}(),timer=function(){function e(e,t){var n=document.getElementById("rect"+e),i=new RegExp("(^| )rect-animate-color($| )","g");"session"===t?n.className+=" rect-animate-color":n.className=n.className.replace(i," ")}function t(){u?(u=!1,E.style.backgroundImage="url(../img/reload-icon.svg)",i()):(u=!0,E.style.backgroundImage="url(../img/play-icon.svg)",n())}function n(){o(!1),m=!1,s=!1,clearTimeout(r),clearTimeout(c),clearTimeout(d),clearTimeout(l),displayValue=setSession.getValue();for(var t=0;t<=a;t++)e(t,"reset")}function i(){var t=setSession.getValue(),n=setBreak.getValue(),u=t/a,f=n/a,E=0,y=0;s=!0,m||o(!0),r=setInterval(function(){E<=a&&(e(E,"session"),E++)},u*g),c=setTimeout(function(){d=setInterval(function(){y<=a&&(e(y,"break"),y++)},f*g)},t*g),l=setTimeout(function(){clearTimeout(r),clearTimeout(c),clearTimeout(d),s&&i()},(t+n)*g)}function o(e){!1===e?(y.disabled=!1,I.disabled=!1,k.disabled=!1,v.disabled=!1):(y.disabled=!0,I.disabled=!0,k.disabled=!0,v.disabled=!0)}var a=364,s=!0,r=null,c=null,d=null,l=null,m=!1,u=!0,g=6e4,f=document.getElementById("timer-wrapper"),E=document.getElementById("start-btn"),y=document.getElementById("session-increase"),I=document.getElementById("session-decrease"),k=document.getElementById("break-increase"),v=document.getElementById("break-decrease");E.addEventListener("click",t),function(){for(var e=new Date,t=e.getDay(),n=0;n<t;n++){var i=document.createElement("div");i.setAttribute("id","rect"+(a+1+n)),i.className+=" rect",f.appendChild(i)}a+=t}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldEJyZWFrLmpzIiwic2V0U2Vzc2lvbi5qcyIsInRpbWVNYXJrZXJzLmpzIiwidGltZXIuanMiXSwibmFtZXMiOlsic2V0QnJlYWsiLCJfcmVuZGVyIiwiYnJlYWtJbnB1dCIsInRleHRDb250ZW50IiwiYnJlYWtWYWx1ZSIsInRvU3RyaW5nIiwiX2luY3JlbWVudCIsIl9kZWNyZW1lbnQiLCJnZXRWYWx1ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbmNUaW1lIiwiZGVjVGltZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRTZXNzaW9uIiwic2Vzc2lvbklucHV0Iiwic2Vzc2lvblZhbHVlIiwidGltZU1hcmtlcnMiLCJtYXJrMCIsIk1hdGgiLCJmbG9vciIsIm1hcmsxIiwibWFyazIiLCJtYXJrMyIsIm1hcms0IiwidGltZXIiLCJpZCIsInR5cGUiLCJyZWN0YW5nbGUiLCJyZWciLCJSZWdFeHAiLCJjbGFzc05hbWUiLCJyZXBsYWNlIiwiX2NvdW50ZG93blN3aXRjaCIsInBsYXlCdG4iLCJzdGFydCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiX3N0YXJ0Q291bnRkb3duIiwiX3Jlc2V0VGltZXIiLCJfZGlzYWJsZUJ0bnMiLCJkaXNhYmxlIiwicGxheU9uIiwiY2xlYXJUaW1lb3V0IiwibXlTZXNzaW9uQ291bnRkb3duIiwibXlCcmVha0NvdW50ZG93biIsIm15QnJlYWtJbm5lckNvdW50ZG93biIsImxvb3BUaW1lciIsImRpc3BsYXlWYWx1ZSIsImkiLCJOX1JFQ1QiLCJzZXNzaW9uVGltZSIsImJyZWFrVGltZSIsInJlY3RTZXNzaW9uVGltZSIsInJlY3RCcmVha1RpbWUiLCJzIiwiYiIsInNldEludGVydmFsIiwibWludXRlIiwic2V0VGltZW91dCIsInNlc3Npb25JbmNCdG4iLCJkaXNhYmxlZCIsInNlc3Npb25EZWNCdG4iLCJicmVha0luY0J0biIsImJyZWFrRGVjQnRuIiwidGltZXJXcmFwcGVyIiwiZCIsIkRhdGUiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFdBWUEsUUFBQUMsS0FDQUMsRUFBQUMsWUFBQUMsRUFBQUMsV0FBQSxPQUdBLFFBQUFDLEtBQ0EsS0FBQUYsR0FBQUEsSUFDQUgsSUFHQSxRQUFBTSxLQUNBLElBQUFILEdBQUFBLElBQ0FILElBR0EsUUFBQU8sS0FDQSxNQUFBSixHQTFCQSxHQUFBQSxHQUFBLEVBRUFGLEVBQUFPLFNBQUFDLGVBQUEsZUFDQUMsRUFBQUYsU0FBQUMsZUFBQSxrQkFDQUUsRUFBQUgsU0FBQUMsZUFBQSxpQkF5QkEsT0F2QkFDLEdBQUFFLGlCQUFBLFFBQUFQLEdBQ0FNLEVBQUFDLGlCQUFBLFFBQUFOLEdBRUFOLEtBcUJBTyxTQUFBQSxNQy9CQU0sV0FBQSxXQVlBLFFBQUFiLEtBQ0FjLEVBQUFaLFlBQUFhLEVBQUFYLFdBQUEsT0FHQSxRQUFBQyxLQUNBLE1BQUFVLEdBQUFBLElBQ0FmLElBR0EsUUFBQU0sS0FDQSxJQUFBUyxHQUFBQSxJQUNBZixJQUdBLFFBQUFPLEtBQ0EsTUFBQVEsR0ExQkEsR0FBQUEsR0FBQSxFQUVBRCxFQUFBTixTQUFBQyxlQUFBLGlCQUNBQyxFQUFBRixTQUFBQyxlQUFBLG9CQUNBRSxFQUFBSCxTQUFBQyxlQUFBLG1CQXlCQSxPQXZCQUMsR0FBQUUsaUJBQUEsUUFBQVAsR0FDQU0sRUFBQUMsaUJBQUEsUUFBQU4sR0FFQU4sS0FxQkFPLFNBQUFBLE1DL0JBUyxZQUFBLFdBYUEsUUFBQWhCLEtBQ0FpQixFQUFBZixZQUFBZ0IsS0FBQUMsTUFBQU4sV0FBQU4sV0FBQSxFQUFBLEdBQUFILFdBQUEsT0FDQWdCLEVBQUFsQixZQUFBZ0IsS0FBQUMsTUFBQU4sV0FBQU4sV0FBQSxFQUFBLEdBQUFILFdBQUEsT0FDQWlCLEVBQUFuQixZQUFBZ0IsS0FBQUMsTUFBQU4sV0FBQU4sV0FBQSxFQUFBLEdBQUFILFdBQUEsT0FDQWtCLEVBQUFwQixZQUFBZ0IsS0FBQUMsTUFBQU4sV0FBQU4sV0FBQSxFQUFBLEdBQUFILFdBQUEsT0FDQW1CLEVBQUFyQixZQUFBZ0IsS0FBQUMsTUFBQU4sV0FBQU4sV0FBQSxFQUFBLEdBQUFILFdBQUEsT0FoQkEsR0FBQWEsR0FBQVQsU0FBQUMsZUFBQSxlQUNBVyxFQUFBWixTQUFBQyxlQUFBLGVBQ0FZLEVBQUFiLFNBQUFDLGVBQUEsZUFDQWEsRUFBQWQsU0FBQUMsZUFBQSxlQUNBYyxFQUFBZixTQUFBQyxlQUFBLGVBQ0FDLEVBQUFGLFNBQUFDLGVBQUEsb0JBQ0FFLEVBQUFILFNBQUFDLGVBQUEsbUJBRUFDLEdBQUFFLGlCQUFBLFFBQUFaLEdBQ0FXLEVBQUFDLGlCQUFBLFFBQUFaLE1DWEF3QixNQUFBLFdBb0NBLFFBQUF4QixHQUFBeUIsRUFBQUMsR0FDQSxHQUFBQyxHQUFBbkIsU0FBQUMsZUFBQSxPQUFBZ0IsR0FDQUcsRUFBQSxHQUFBQyxRQUFBLCtCQUFBLElBRUEsYUFBQUgsRUFBQUMsRUFBQUcsV0FBQSxzQkFBQUgsRUFBQUcsVUFBQUgsRUFBQUcsVUFBQUMsUUFBQUgsRUFBQSxLQUdBLFFBQUFJLEtBQ0FDLEdBQ0FBLEdBQUEsRUFDQUMsRUFBQUMsTUFBQUMsZ0JBQUEsOEJBQ0FDLE1BRUFKLEdBQUEsRUFDQUMsRUFBQUMsTUFBQUMsZ0JBQUEsNEJBQ0FFLEtBSUEsUUFBQUEsS0FDQUMsR0FBQSxHQUNBQyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsYUFBQUMsR0FDQUQsYUFBQUUsR0FDQUYsYUFBQUcsR0FDQUgsYUFBQUksR0FDQUMsYUFBQWxDLFdBQUFOLFVBQ0EsS0FBQSxHQUFBeUMsR0FBQSxFQUFBQSxHQUFBQyxFQUFBRCxJQUNBaEQsRUFBQWdELEVBQUEsU0FJQSxRQUFBWCxLQUNBLEdBQUFhLEdBQUFyQyxXQUFBTixXQUNBNEMsRUFBQXBELFNBQUFRLFdBQ0E2QyxFQUFBRixFQUFBRCxFQUNBSSxFQUFBRixFQUFBRixFQUNBSyxFQUFBLEVBQ0FDLEVBQUEsQ0FDQWQsSUFBQSxFQUVBRCxHQUNBRCxHQUFBLEdBR0FJLEVBQUFhLFlBQUEsV0FDQUYsR0FBQUwsSUFDQWpELEVBQUFzRCxFQUFBLFdBQ0FBLE1BRUFGLEVBQUFLLEdBRUFiLEVBQUFjLFdBQUEsV0FDQWIsRUFBQVcsWUFBQSxXQUNBRCxHQUFBTixJQUNBakQsRUFBQXVELEVBQUEsU0FDQUEsTUFFQUYsRUFBQUksSUFDQVAsRUFBQU8sR0FFQVgsRUFBQVksV0FBQSxXQUNBaEIsYUFBQUMsR0FDQUQsYUFBQUUsR0FDQUYsYUFBQUcsR0FDQUosR0FDQUosTUFJQWEsRUFBQUMsR0FBQU0sR0FHQSxRQUFBbEIsR0FBQUMsSUFDQSxJQUFBQSxHQUNBbUIsRUFBQUMsVUFBQSxFQUNBQyxFQUFBRCxVQUFBLEVBQ0FFLEVBQUFGLFVBQUEsRUFDQUcsRUFBQUgsVUFBQSxJQUVBRCxFQUFBQyxVQUFBLEVBQ0FDLEVBQUFELFVBQUEsRUFDQUUsRUFBQUYsVUFBQSxFQUNBRyxFQUFBSCxVQUFBLEdBdkhBLEdBQUFYLEdBQUEsSUFDQVIsR0FBQSxFQUNBRSxFQUFBLEtBQ0FDLEVBQUEsS0FDQUMsRUFBQSxLQUNBQyxFQUFBLEtBQ0FOLEdBQUEsRUFDQVAsR0FBQSxFQUNBd0IsRUFBQSxJQUVBTyxFQUFBeEQsU0FBQUMsZUFBQSxpQkFDQXlCLEVBQUExQixTQUFBQyxlQUFBLGFBQ0FrRCxFQUFBbkQsU0FBQUMsZUFBQSxvQkFDQW9ELEVBQUFyRCxTQUFBQyxlQUFBLG9CQUNBcUQsRUFBQXRELFNBQUFDLGVBQUEsa0JBQ0FzRCxFQUFBdkQsU0FBQUMsZUFBQSxpQkFFQXlCLEdBQUF0QixpQkFBQSxRQUFBb0IsR0FLQSxXQUlBLElBQUEsR0FIQWlDLEdBQUEsR0FBQUMsTUFDQUMsRUFBQUYsRUFBQUcsU0FFQXBCLEVBQUEsRUFBQUEsRUFBQW1CLEVBQUFuQixJQUFBLENBQ0EsR0FBQXFCLEdBQUE3RCxTQUFBOEQsY0FBQSxNQUNBRCxHQUFBRSxhQUFBLEtBQUEsUUFBQXRCLEVBQUEsRUFBQUQsSUFDQXFCLEVBQUF2QyxXQUFBLFFBQ0FrQyxFQUFBUSxZQUFBSCxHQUVBcEIsR0FBQWtCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBzZXRCcmVhayA9IChmdW5jdGlvbigpe1xuICB2YXIgYnJlYWtWYWx1ZSA9IDE7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBicmVha0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWlucHV0Jyk7XG4gIHZhciBpbmNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWRlY3JlYXNlJyk7XG4vLyAgQmluZCBjbGljayBldmVudHNcbiAgaW5jVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9pbmNyZW1lbnQpO1xuICBkZWNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2RlY3JlbWVudCk7XG4vLyBSZW5kZXIgdGhlIGluaXRpYWwgdmFsdWUgZnJvbSBicmVha1ZhbHVlXG4gIF9yZW5kZXIoKTtcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIGJyZWFrSW5wdXQudGV4dENvbnRlbnQgPSBicmVha1ZhbHVlLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cblxuICBmdW5jdGlvbiBfaW5jcmVtZW50KCkge1xuICAgIGJyZWFrVmFsdWUgPT09IDYwID8gJycgOiBicmVha1ZhbHVlKys7XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RlY3JlbWVudCgpIHtcbiAgICBicmVha1ZhbHVlID09PSAxID8gJycgOiBicmVha1ZhbHVlLS07XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUgKCkge1xuICAgICByZXR1cm4gYnJlYWtWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgICBnZXRWYWx1ZSA6IGdldFZhbHVlXG4gIH07XG5cbn0pKCk7XG4iLCJ2YXIgc2V0U2Vzc2lvbiA9IChmdW5jdGlvbigpe1xuICB2YXIgc2Vzc2lvblZhbHVlID0gMTtcbi8vIENhY2hlIHRoZSBET01cbiAgdmFyIHNlc3Npb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWlucHV0Jyk7XG4gIHZhciBpbmNUaW1lICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1pbmNyZWFzZScpO1xuICB2YXIgZGVjVGltZSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcbi8vICBCaW5kIGNsaWNrIGV2ZW50c1xuICBpbmNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2luY3JlbWVudCk7XG4gIGRlY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfZGVjcmVtZW50KTtcbi8vIFJlbmRlciB0aGUgaW5pdGlhbCB2YWx1ZSBmcm9tIHNlc3Npb25WYWx1ZVxuICBfcmVuZGVyKCk7XG5cbiAgZnVuY3Rpb24gX3JlbmRlcigpIHtcbiAgICBzZXNzaW9uSW5wdXQudGV4dENvbnRlbnQgPSBzZXNzaW9uVmFsdWUudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbmNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSAzNjAgPyAnJyA6IHNlc3Npb25WYWx1ZSsrO1xuICAgIF9yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSAxID8gJycgOiBzZXNzaW9uVmFsdWUtLTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZSAoKSB7XG4gICAgIHJldHVybiBzZXNzaW9uVmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgICAgZ2V0VmFsdWUgOiBnZXRWYWx1ZVxuICB9O1xuXG59KSgpO1xuIiwidmFyIHRpbWVNYXJrZXJzID0gKGZ1bmN0aW9uKCl7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBtYXJrMCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0wJyk7XG4gIHZhciBtYXJrMSAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0xJyk7XG4gIHZhciBtYXJrMiAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0yJyk7XG4gIHZhciBtYXJrMyAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0zJyk7XG4gIHZhciBtYXJrNCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay00Jyk7XG4gIHZhciBpbmNUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIGRlY1RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfcmVuZGVyKTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9yZW5kZXIpO1xuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgbWFyazAudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiAxKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcmsxLnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogMikudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrMi50ZXh0Q29udGVudCA9IE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDMpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gICAgbWFyazMudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiA0KS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcms0LnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogNSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxufSkoKTtcbiIsInZhciB0aW1lciA9IChmdW5jdGlvbigpIHtcbiAgdmFyIE5fUkVDVCAgICAgICAgICAgICAgICA9IDM2NDtcbiAgdmFyIHBsYXlPbiAgICAgICAgICAgICAgICA9IHRydWU7XG4gIHZhciBteVNlc3Npb25Db3VudGRvd24gICAgPSBudWxsO1xuICB2YXIgbXlCcmVha0NvdW50ZG93biAgICAgID0gbnVsbDtcbiAgdmFyIG15QnJlYWtJbm5lckNvdW50ZG93biA9IG51bGw7XG4gIHZhciBsb29wVGltZXIgICAgICAgICAgICAgPSBudWxsO1xuICB2YXIgZGlzYWJsZSAgICAgICAgICAgICAgID0gZmFsc2U7XG4gIHZhciBwbGF5QnRuICAgICAgICAgICAgICAgPSB0cnVlO1xuICB2YXIgbWludXRlICAgICAgICAgICAgICAgID0gNjAwMDA7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciB0aW1lcldyYXBwZXIgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVyLXdyYXBwZXInKTtcbiAgdmFyIHN0YXJ0ICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtYnRuJyk7XG4gIHZhciBzZXNzaW9uSW5jQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIHNlc3Npb25EZWNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuICB2YXIgYnJlYWtJbmNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbmNyZWFzZScpO1xuICB2YXIgYnJlYWtEZWNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1kZWNyZWFzZScpO1xuLy8gQmluZCBjbGljayBldmVudHNcbiAgc3RhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfY291bnRkb3duU3dpdGNoKTtcbi8vIFJlbmRlciB0aGUgdGltZXIgZGlzcGxheVxuXG5fdXBkYXRlTnVtYmVyT2ZSZWN0YW5nbGVzKCk7XG5cbiAgZnVuY3Rpb24gX3VwZGF0ZU51bWJlck9mUmVjdGFuZ2xlcygpIHtcbiAgICB2YXIgZCAgICAgICA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIHdlZWtEYXkgPSBkLmdldERheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3ZWVrRGF5OyBpKyspIHtcbiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicmVjdFwiICsgKE5fUkVDVCArIDEgKyBpKSApO1xuICAgICAgZGl2LmNsYXNzTmFtZSArPSBcIiByZWN0XCI7XG4gICAgICB0aW1lcldyYXBwZXIuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG4gICAgTl9SRUNUID0gTl9SRUNUICsgd2Vla0RheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoaWQsIHR5cGUpIHtcbiAgICB2YXIgcmVjdGFuZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY3QnICsgaWQpO1xuICAgIHZhciByZWcgICAgICAgPSBuZXcgUmVnRXhwKCcoXnwgKScrICdyZWN0LWFuaW1hdGUtY29sb3InICsnKCR8ICknLCdnJyk7XG5cbiAgICB0eXBlID09PSAnc2Vzc2lvbicgPyByZWN0YW5nbGUuY2xhc3NOYW1lICs9IFwiIHJlY3QtYW5pbWF0ZS1jb2xvclwiIDogcmVjdGFuZ2xlLmNsYXNzTmFtZSA9IHJlY3RhbmdsZS5jbGFzc05hbWUucmVwbGFjZShyZWcsJyAnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb3VudGRvd25Td2l0Y2goKSB7XG4gICAgaWYocGxheUJ0bikge1xuICAgICAgcGxheUJ0biA9IGZhbHNlO1xuICAgICAgc3RhcnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi4vaW1nL3JlbG9hZC1pY29uLnN2ZylcIjtcbiAgICAgIF9zdGFydENvdW50ZG93bigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGF5QnRuID0gdHJ1ZTtcbiAgICAgIHN0YXJ0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4uL2ltZy9wbGF5LWljb24uc3ZnKVwiO1xuICAgICAgX3Jlc2V0VGltZXIoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfcmVzZXRUaW1lcigpIHtcbiAgICBfZGlzYWJsZUJ0bnMoZmFsc2UpO1xuICAgIGRpc2FibGUgPSBmYWxzZTtcbiAgICBwbGF5T24gPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQobXlTZXNzaW9uQ291bnRkb3duKTtcbiAgICBjbGVhclRpbWVvdXQobXlCcmVha0NvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KG15QnJlYWtJbm5lckNvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KGxvb3BUaW1lcik7XG4gICAgZGlzcGxheVZhbHVlID0gc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IE5fUkVDVDsgaSsrKSB7XG4gICAgICBfcmVuZGVyKGksJ3Jlc2V0Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0Q291bnRkb3duKCkge1xuICAgIHZhciBzZXNzaW9uVGltZSAgICAgPSBzZXRTZXNzaW9uLmdldFZhbHVlKCk7XG4gICAgdmFyIGJyZWFrVGltZSAgICAgICA9IHNldEJyZWFrLmdldFZhbHVlKCk7XG4gICAgdmFyIHJlY3RTZXNzaW9uVGltZSA9IHNlc3Npb25UaW1lIC8gTl9SRUNUO1xuICAgIHZhciByZWN0QnJlYWtUaW1lICAgPSAgYnJlYWtUaW1lIC8gTl9SRUNUO1xuICAgIHZhciBzICAgICAgICAgICAgICAgPSAwO1xuICAgIHZhciBiICAgICAgICAgICAgICAgPSAwO1xuICAgIHBsYXlPbiAgICAgICAgICAgICAgPSB0cnVlO1xuXG4gICAgaWYoIWRpc2FibGUpIHtcbiAgICBfZGlzYWJsZUJ0bnModHJ1ZSk7XG4gICAgfVxuXG4gICAgbXlTZXNzaW9uQ291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBpZihzIDw9IE5fUkVDVCkge1xuICAgICAgX3JlbmRlcihzLCdzZXNzaW9uJyk7XG4gICAgICBzKys7XG4gICAgICB9XG4gICAgfSwgcmVjdFNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIG15QnJlYWtDb3VudGRvd24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIG15QnJlYWtJbm5lckNvdW50ZG93biA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihiIDw9IE5fUkVDVCkge1xuICAgICAgICAgIF9yZW5kZXIoYiwnYnJlYWsnKTtcbiAgICAgICAgICBiKys7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlY3RCcmVha1RpbWUgKiBtaW51dGUpO1xuICAgIH0sIHNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIGxvb3BUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQobXlTZXNzaW9uQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrSW5uZXJDb3VudGRvd24pO1xuICAgICAgaWYgKHBsYXlPbikge1xuICAgICAgICAgX3N0YXJ0Q291bnRkb3duKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwoc2Vzc2lvblRpbWUgKyBicmVha1RpbWUpICogbWludXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kaXNhYmxlQnRucyhkaXNhYmxlKSB7XG4gICAgaWYoZGlzYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgIHNlc3Npb25JbmNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNlc3Npb25EZWNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGJyZWFrSW5jQnRuLmRpc2FibGVkICAgPSBmYWxzZTtcbiAgICAgIGJyZWFrRGVjQnRuLmRpc2FibGVkICAgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vzc2lvbkluY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzZXNzaW9uRGVjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIGJyZWFrSW5jQnRuLmRpc2FibGVkICAgPSB0cnVlO1xuICAgICAgYnJlYWtEZWNCdG4uZGlzYWJsZWQgICA9IHRydWU7XG4gICAgfVxuICB9XG5cbn0pKCk7XG4iXX0=
