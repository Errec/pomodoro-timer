function addZero(e){return e>9?""+e:"0"+e}!function(e){function t(){do{r==i?r=0:r++}while(o.hasOwnProperty(r));return r}if(!/MSIE 10/i.test(navigator.userAgent))try{var n=new Blob(["var fakeIdToId = {};onmessage = function (event) {  var data = event.data,    name = data.name,    fakeId = data.fakeId,    time;  if(data.hasOwnProperty('time')) {    time = data.time;  }  switch (name) {    case 'setInterval':      fakeIdToId[fakeId] = setInterval(function () {        postMessage({fakeId: fakeId});      }, time);      break;    case 'clearInterval':      if (fakeIdToId.hasOwnProperty (fakeId)) {        clearInterval(fakeIdToId[fakeId]);        delete fakeIdToId[fakeId];      }      break;    case 'setTimeout':      fakeIdToId[fakeId] = setTimeout(function () {        postMessage({fakeId: fakeId});        if (fakeIdToId.hasOwnProperty (fakeId)) {          delete fakeIdToId[fakeId];        }      }, time);      break;    case 'clearTimeout':      if (fakeIdToId.hasOwnProperty (fakeId)) {        clearTimeout(fakeIdToId[fakeId]);        delete fakeIdToId[fakeId];      }      break;  }}"]);e=window.URL.createObjectURL(n)}catch(e){}var a,o={},r=0,i=2147483647,s="HackTimer.js by turuslan: ";if("undefined"!=typeof Worker)try{a=new Worker(e),window.setInterval=function(e,n){var r=t();return o[r]={callback:e,parameters:Array.prototype.slice.call(arguments,2)},a.postMessage({name:"setInterval",fakeId:r,time:n}),r},window.clearInterval=function(e){o.hasOwnProperty(e)&&(delete o[e],a.postMessage({name:"clearInterval",fakeId:e}))},window.setTimeout=function(e,n){var r=t();return o[r]={callback:e,parameters:Array.prototype.slice.call(arguments,2),isTimeout:!0},a.postMessage({name:"setTimeout",fakeId:r,time:n}),r},window.clearTimeout=function(e){o.hasOwnProperty(e)&&(delete o[e],a.postMessage({name:"clearTimeout",fakeId:e}))},a.onmessage=function(e){var t,n,a,r=e.data,i=r.fakeId;if(o.hasOwnProperty(i)&&(t=o[i],a=t.callback,n=t.parameters,t.hasOwnProperty("isTimeout")&&t.isTimeout&&delete o[i]),"string"==typeof a)try{a=new Function(a)}catch(e){console.log(s+"Error parsing callback code string: ",e)}"function"==typeof a&&a.apply(window,n)},a.onerror=function(e){console.log(e)},console.log(s+"Initialisation succeeded")}catch(e){console.log(s+"Initialisation failed"),console.error(e)}else console.log(s+"Initialisation failed - HTML5 Web Worker is not supported")}("HackTimerWorker.js");var setBreak=function(){function e(){r.textContent=5===o?"05 min":o.toString()+" min"}function t(){60===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function a(){return o}var o=5,r=document.getElementById("break-input"),i=document.getElementById("break-increase"),s=document.getElementById("break-decrease");return i.addEventListener("click",t),s.addEventListener("click",n),{getValue:a}}(),setSession=function(){function e(){r.textContent=5===o?"05 min":o.toString()+" min"}function t(){360===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function a(){return o}var o=5,r=document.getElementById("session-input"),i=document.getElementById("session-increase"),s=document.getElementById("session-decrease");return i.addEventListener("click",t),s.addEventListener("click",n),{getValue:a}}(),timeMarkers=function(){function e(){t.textContent=addZero(Math.floor(setSession.getValue()/5*1)).toString()+" min",n.textContent=addZero(Math.floor(setSession.getValue()/5*2)).toString()+" min",a.textContent=addZero(Math.floor(setSession.getValue()/5*3)).toString()+" min",o.textContent=addZero(Math.floor(setSession.getValue()/5*4)).toString()+" min",r.textContent=addZero(Math.floor(setSession.getValue()/5*5)).toString()+" min"}var t=document.getElementById("time-mark-0"),n=document.getElementById("time-mark-1"),a=document.getElementById("time-mark-2"),o=document.getElementById("time-mark-3"),r=document.getElementById("time-mark-4"),i=document.getElementById("session-increase"),s=document.getElementById("session-decrease");i.addEventListener("click",e),s.addEventListener("click",e)}(),timer=function(){function e(e,t){var n=document.getElementById("rect"+e),a=new RegExp("(^| )rect-animate-color($| )","g");"session"===t?n.className+=" rect-animate-color":n.className=n.className.replace(a," ")}function t(){u?(u=!1,k.style.backgroundImage="url(../img/reload-icon.svg)",a()):(u=!0,k.style.backgroundImage="url(../img/play-icon.svg)",n())}function n(){o(!1),m=!1,i=!1,clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(l),clearTimeout(commitUpdate),v.textContent="0 contributions in the current session",displayValue=setSession.getValue();for(var t=0;t<=r;t++)e(t,"reset")}function a(){var t=setSession.getValue(),n=setBreak.getValue(),u=t/r,I=n/r,k=u/4,g=0,y=0,p=0;i=!0,m||o(!0),commitUpdate=setInterval(function(){v.textContent=g.toString()+" contributions in the current session",g++},k*f),s=setInterval(function(){y<=r&&(e(y,"session"),y++)},u*f),d=setTimeout(function(){clearTimeout(commitUpdate),v.textContent="WARNING: the database server has gone away! Take a break...",c=setInterval(function(){p<=r&&(e(p,"break"),p++)},I*f)},t*f),l=setTimeout(function(){clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(commitUpdate),i&&a()},(t+n)*f)}function o(e){!1===e?(g.disabled=!1,g.style.backgroundColor="#f7f9fa",y.disabled=!1,y.style.backgroundColor="#f7f9fa",p.disabled=!1,p.style.backgroundColor="#f7f9fa",b.disabled=!1,b.style.backgroundColor="#f7f9fa"):(g.disabled=!0,g.style.backgroundColor="#BCBCBC",y.disabled=!0,y.style.backgroundColor="#BCBCBC",p.disabled=!0,p.style.backgroundColor="#BCBCBC",b.disabled=!0,b.style.backgroundColor="#BCBCBC")}var r=364,i=!0,s=null,d=null,c=null,l=null,m=!1,u=!0,f=6e4,I=document.getElementById("timer-wrapper"),k=document.getElementById("start-btn"),g=document.getElementById("session-increase"),y=document.getElementById("session-decrease"),p=document.getElementById("break-increase"),b=document.getElementById("break-decrease"),v=document.getElementById("commit-count");document.getElementById("headline");k.addEventListener("click",t),function(){for(var e=new Date,t=e.getDay(),n=0;n<t;n++){var a=document.createElement("div");a.setAttribute("id","rect"+(r+1+n)),a.className+=" rect",I.appendChild(a)}r+=t}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJIYWNrVGltZXIuanMiLCJzZXRCcmVhay5qcyIsInNldFNlc3Npb24uanMiLCJ0aW1lTWFya2Vycy5qcyIsInRpbWVyLmpzIl0sIm5hbWVzIjpbImFkZFplcm8iLCJuIiwid29ya2VyU2NyaXB0IiwiZ2V0RmFrZUlkIiwibGFzdEZha2VJZCIsIm1heEZha2VJZCIsImZha2VJZFRvQ2FsbGJhY2siLCJoYXNPd25Qcm9wZXJ0eSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJibG9iIiwiQmxvYiIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImVycm9yIiwid29ya2VyIiwibG9nUHJlZml4IiwiV29ya2VyIiwic2V0SW50ZXJ2YWwiLCJjYWxsYmFjayIsInRpbWUiLCJmYWtlSWQiLCJwYXJhbWV0ZXJzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJwb3N0TWVzc2FnZSIsIm5hbWUiLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsImlzVGltZW91dCIsImNsZWFyVGltZW91dCIsIm9ubWVzc2FnZSIsImV2ZW50IiwicmVxdWVzdCIsImRhdGEiLCJGdW5jdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJhcHBseSIsIm9uZXJyb3IiLCJzZXRCcmVhayIsIl9yZW5kZXIiLCJicmVha0lucHV0IiwidGV4dENvbnRlbnQiLCJicmVha1ZhbHVlIiwidG9TdHJpbmciLCJfaW5jcmVtZW50IiwiX2RlY3JlbWVudCIsImdldFZhbHVlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImluY1RpbWUiLCJkZWNUaW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFNlc3Npb24iLCJzZXNzaW9uSW5wdXQiLCJzZXNzaW9uVmFsdWUiLCJ0aW1lTWFya2VycyIsIm1hcmswIiwiTWF0aCIsImZsb29yIiwibWFyazEiLCJtYXJrMiIsIm1hcmszIiwibWFyazQiLCJ0aW1lciIsImlkIiwidHlwZSIsInJlY3RhbmdsZSIsInJlZyIsIlJlZ0V4cCIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJfY291bnRkb3duU3dpdGNoIiwicGxheUJ0biIsInN0YXJ0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfc3RhcnRDb3VudGRvd24iLCJfcmVzZXRUaW1lciIsIl9kaXNhYmxlQnRucyIsImRpc2FibGUiLCJwbGF5T24iLCJteVNlc3Npb25Db3VudGRvd24iLCJteUJyZWFrQ291bnRkb3duIiwibXlCcmVha0lubmVyQ291bnRkb3duIiwibG9vcFRpbWVyIiwiY29tbWl0VXBkYXRlIiwiY29tbWl0Q291bnQiLCJkaXNwbGF5VmFsdWUiLCJpIiwiTl9SRUNUIiwic2Vzc2lvblRpbWUiLCJicmVha1RpbWUiLCJyZWN0U2Vzc2lvblRpbWUiLCJyZWN0QnJlYWtUaW1lIiwiY29tbWl0VGltZSIsImMiLCJzIiwiYiIsIm1pbnV0ZSIsInNlc3Npb25JbmNCdG4iLCJkaXNhYmxlZCIsImJhY2tncm91bmRDb2xvciIsInNlc3Npb25EZWNCdG4iLCJicmVha0luY0J0biIsImJyZWFrRGVjQnRuIiwidGltZXJXcmFwcGVyIiwiZCIsIkRhdGUiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUEsRUFBQSxHQUFBQSxFQUFBLElBQUFBLEdDREEsU0FBQUMsR0E0REEsUUFBQUMsS0FDQSxHQUNBQyxHQUFBQyxFQUNBRCxFQUFBLEVBRUFBLFVBRUFFLEVBQUFDLGVBQUFILEdBQ0EsT0FBQUEsR0E3REEsSUFBQSxXQUFBSSxLQUFBQyxVQUFBQyxXQUNBLElBQ0EsR0FBQUMsR0FBQSxHQUFBQyxPQUFBLHE1QkF3Q0FWLEdBQUFXLE9BQUFDLElBQUFDLGdCQUFBSixHQUNBLE1BQUFLLElBSUEsR0FBQUMsR0FDQVgsS0FDQUYsRUFBQSxFQUNBQyxFQUFBLFdBQ0FhLEVB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RixVQUFBLEVBQ0FFLEVBQUE1QixNQUFBMkIsZ0JBQUEsVUFDQUUsRUFBQUgsVUFBQSxFQUNBRyxFQUFBN0IsTUFBQTJCLGdCQUFBLFVBQ0FHLEVBQUFKLFVBQUEsRUFDQUksRUFBQTlCLE1BQUEyQixnQkFBQSxXQTdJQSxHQUFBWixHQUFBLElBQ0FULEdBQUEsRUFDQUMsRUFBQSxLQUNBQyxFQUFBLEtBQ0FDLEVBQUEsS0FDQUMsRUFBQSxLQUNBTCxHQUFBLEVBQ0FQLEdBQUEsRUFDQTBCLEVBQUEsSUFFQU8sRUFBQTFELFNBQUFDLGVBQUEsaUJBQ0F5QixFQUFBMUIsU0FBQUMsZUFBQSxhQUNBbUQsRUFBQXBELFNBQUFDLGVBQUEsb0JBQ0FzRCxFQUFBdkQsU0FBQUMsZUFBQSxvQkFDQXVELEVBQUF4RCxTQUFBQyxlQUFBLGtCQUNBd0QsRUFBQXpELFNBQUFDLGVBQUEsa0JBQ0FzQyxFQUFBdkMsU0FBQUMsZUFBQSxlQUNBRCxVQUFBQyxlQUFBLFdBRUF5QixHQUFBdEIsaUJBQUEsUUFBQW9CLEdBS0EsV0FJQSxJQUFBLEdBSEFtQyxHQUFBLEdBQUFDLE1BQ0FDLEVBQUFGLEVBQUFHLFNBRUFyQixFQUFBLEVBQUFBLEVBQUFvQixFQUFBcEIsSUFBQSxDQUNBLEdBQUFzQixHQUFBL0QsU0FBQWdFLGNBQUEsTUFDQUQsR0FBQUUsYUFBQSxLQUFBLFFBQUF2QixFQUFBLEVBQUFELElBQ0FzQixFQUFBekMsV0FBQSxRQUNBb0MsRUFBQVEsWUFBQUgsR0FFQXJCLEdBQUFtQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIGZ1bmN0aW9uIGFkZFplcm8obikge1xuICAgIHJldHVybiBuID4gOSA/IFwiXCIgKyBuOiBcIjBcIiArIG47XG4gIH1cbiIsIihmdW5jdGlvbiAod29ya2VyU2NyaXB0KSB7XG5cbi8qXG5vcmlnaW5hbCBjb2RlIGZyb206XG5odHRwczovL2dpdGh1Yi5jb20vdHVydXNsYW4vSGFja1RpbWVyXG4qL1xuXG4gIGlmICghL01TSUUgMTAvaS50ZXN0IChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iIChbXCJcXFxudmFyIGZha2VJZFRvSWQgPSB7fTtcXFxub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XFxcbiAgdmFyIGRhdGEgPSBldmVudC5kYXRhLFxcXG4gICAgbmFtZSA9IGRhdGEubmFtZSxcXFxuICAgIGZha2VJZCA9IGRhdGEuZmFrZUlkLFxcXG4gICAgdGltZTtcXFxuICBpZihkYXRhLmhhc093blByb3BlcnR5KCd0aW1lJykpIHtcXFxuICAgIHRpbWUgPSBkYXRhLnRpbWU7XFxcbiAgfVxcXG4gIHN3aXRjaCAobmFtZSkge1xcXG4gICAgY2FzZSAnc2V0SW50ZXJ2YWwnOlxcXG4gICAgICBmYWtlSWRUb0lkW2Zha2VJZF0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XFxcbiAgICAgICAgcG9zdE1lc3NhZ2Uoe2Zha2VJZDogZmFrZUlkfSk7XFxcbiAgICAgIH0sIHRpbWUpO1xcXG4gICAgICBicmVhaztcXFxuICAgIGNhc2UgJ2NsZWFySW50ZXJ2YWwnOlxcXG4gICAgICBpZiAoZmFrZUlkVG9JZC5oYXNPd25Qcm9wZXJ0eSAoZmFrZUlkKSkge1xcXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoZmFrZUlkVG9JZFtmYWtlSWRdKTtcXFxuICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICB9XFxcbiAgICAgIGJyZWFrO1xcXG4gICAgY2FzZSAnc2V0VGltZW91dCc6XFxcbiAgICAgIGZha2VJZFRvSWRbZmFrZUlkXSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcXG4gICAgICAgIHBvc3RNZXNzYWdlKHtmYWtlSWQ6IGZha2VJZH0pO1xcXG4gICAgICAgIGlmIChmYWtlSWRUb0lkLmhhc093blByb3BlcnR5IChmYWtlSWQpKSB7XFxcbiAgICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICAgIH1cXFxuICAgICAgfSwgdGltZSk7XFxcbiAgICAgIGJyZWFrO1xcXG4gICAgY2FzZSAnY2xlYXJUaW1lb3V0JzpcXFxuICAgICAgaWYgKGZha2VJZFRvSWQuaGFzT3duUHJvcGVydHkgKGZha2VJZCkpIHtcXFxuICAgICAgICBjbGVhclRpbWVvdXQoZmFrZUlkVG9JZFtmYWtlSWRdKTtcXFxuICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICB9XFxcbiAgICAgIGJyZWFrO1xcXG4gIH1cXFxufVxcXG5cIl0pO1xuICAgICAgLy8gT2J0YWluIGEgYmxvYiBVUkwgcmVmZXJlbmNlIHRvIG91ciB3b3JrZXIgJ2ZpbGUnLlxuICAgICAgd29ya2VyU2NyaXB0ID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8qIEJsb2IgaXMgbm90IHN1cHBvcnRlZCwgdXNlIGV4dGVybmFsIHNjcmlwdCBpbnN0ZWFkICovXG4gICAgfVxuICB9XG4gIHZhciB3b3JrZXIsXG4gICAgZmFrZUlkVG9DYWxsYmFjayA9IHt9LFxuICAgIGxhc3RGYWtlSWQgPSAwLFxuICAgIG1heEZha2VJZCA9IDB4N0ZGRkZGRkYsIC8vIDIgXiAzMSAtIDEsIDMxIGJpdCwgcG9zaXRpdmUgdmFsdWVzIG9mIHNpZ25lZCAzMiBiaXQgaW50ZWdlclxuICAgIGxvZ1ByZWZpeCA9ICdIYWNrVGltZXIuanMgYnkgdHVydXNsYW46ICc7XG4gIGlmICh0eXBlb2YgKFdvcmtlcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZnVuY3Rpb24gZ2V0RmFrZUlkICgpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKGxhc3RGYWtlSWQgPT0gbWF4RmFrZUlkKSB7XG4gICAgICAgICAgbGFzdEZha2VJZCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdEZha2VJZCArKztcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eSAobGFzdEZha2VJZCkpO1xuICAgICAgcmV0dXJuIGxhc3RGYWtlSWQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3b3JrZXIgPSBuZXcgV29ya2VyICh3b3JrZXJTY3JpcHQpO1xuICAgICAgd2luZG93LnNldEludGVydmFsID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aW1lIC8qICwgcGFyYW1ldGVycyAqLykge1xuICAgICAgICB2YXIgZmFrZUlkID0gZ2V0RmFrZUlkICgpO1xuICAgICAgICBmYWtlSWRUb0NhbGxiYWNrW2Zha2VJZF0gPSB7XG4gICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgIHBhcmFtZXRlcnM6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMilcbiAgICAgICAgfTtcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlICh7XG4gICAgICAgICAgbmFtZTogJ3NldEludGVydmFsJyxcbiAgICAgICAgICBmYWtlSWQ6IGZha2VJZCxcbiAgICAgICAgICB0aW1lOiB0aW1lXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFrZUlkO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKGZha2VJZCkge1xuICAgICAgICBpZiAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eShmYWtlSWQpKSB7XG4gICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICAgIG5hbWU6ICdjbGVhckludGVydmFsJyxcbiAgICAgICAgICAgIGZha2VJZDogZmFrZUlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGltZSAvKiAsIHBhcmFtZXRlcnMgKi8pIHtcbiAgICAgICAgdmFyIGZha2VJZCA9IGdldEZha2VJZCAoKTtcbiAgICAgICAgZmFrZUlkVG9DYWxsYmFja1tmYWtlSWRdID0ge1xuICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICBwYXJhbWV0ZXJzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgICAgIGlzVGltZW91dDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICBuYW1lOiAnc2V0VGltZW91dCcsXG4gICAgICAgICAgZmFrZUlkOiBmYWtlSWQsXG4gICAgICAgICAgdGltZTogdGltZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZha2VJZDtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKGZha2VJZCkge1xuICAgICAgICBpZiAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eShmYWtlSWQpKSB7XG4gICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICAgIG5hbWU6ICdjbGVhclRpbWVvdXQnLFxuICAgICAgICAgICAgZmFrZUlkOiBmYWtlSWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBldmVudC5kYXRhLFxuICAgICAgICAgIGZha2VJZCA9IGRhdGEuZmFrZUlkLFxuICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICBjYWxsYmFjaztcbiAgICAgICAgaWYgKGZha2VJZFRvQ2FsbGJhY2suaGFzT3duUHJvcGVydHkoZmFrZUlkKSkge1xuICAgICAgICAgIHJlcXVlc3QgPSBmYWtlSWRUb0NhbGxiYWNrW2Zha2VJZF07XG4gICAgICAgICAgY2FsbGJhY2sgPSByZXF1ZXN0LmNhbGxiYWNrO1xuICAgICAgICAgIHBhcmFtZXRlcnMgPSByZXF1ZXN0LnBhcmFtZXRlcnM7XG4gICAgICAgICAgaWYgKHJlcXVlc3QuaGFzT3duUHJvcGVydHkgKCdpc1RpbWVvdXQnKSAmJiByZXF1ZXN0LmlzVGltZW91dCkge1xuICAgICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbiAoY2FsbGJhY2spO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAobG9nUHJlZml4ICsgJ0Vycm9yIHBhcnNpbmcgY2FsbGJhY2sgY29kZSBzdHJpbmc6ICcsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkgKHdpbmRvdywgcGFyYW1ldGVycyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyAoZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gc3VjY2VlZGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gZmFpbGVkJyk7XG4gICAgICBjb25zb2xlLmVycm9yIChlcnJvcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gZmFpbGVkIC0gSFRNTDUgV2ViIFdvcmtlciBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gIH1cbn0pICgnSGFja1RpbWVyV29ya2VyLmpzJyk7XG4iLCJ2YXIgc2V0QnJlYWsgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIGJyZWFrVmFsdWUgPSA1O1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgYnJlYWtJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbnB1dCcpO1xuICB2YXIgaW5jVGltZSAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbmNyZWFzZScpO1xuICB2YXIgZGVjVGltZSAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1kZWNyZWFzZScpO1xuLy8gIEJpbmQgY2xpY2sgZXZlbnRzXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfaW5jcmVtZW50KTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9kZWNyZW1lbnQpO1xuLy8gUmVuZGVyIHRoZSBpbml0aWFsIHZhbHVlIGZyb20gYnJlYWtWYWx1ZVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgYnJlYWtWYWx1ZSA9PT0gNSA/IGJyZWFrSW5wdXQudGV4dENvbnRlbnQgPSAnMDUgbWluJyA6IGJyZWFrSW5wdXQudGV4dENvbnRlbnQgPSBicmVha1ZhbHVlLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cblxuICBmdW5jdGlvbiBfaW5jcmVtZW50KCkge1xuICAgIGJyZWFrVmFsdWUgPT09IDYwID8gJycgOiBicmVha1ZhbHVlICs9IDU7XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RlY3JlbWVudCgpIHtcbiAgICBicmVha1ZhbHVlID09PSA1ID8gJycgOiBicmVha1ZhbHVlIC09IDU7XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUgKCkge1xuICAgICByZXR1cm4gYnJlYWtWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgICBnZXRWYWx1ZSA6IGdldFZhbHVlXG4gIH07XG5cbn0pKCk7XG4iLCJ2YXIgc2V0U2Vzc2lvbiA9IChmdW5jdGlvbigpe1xuICB2YXIgc2Vzc2lvblZhbHVlID0gNTtcbi8vIENhY2hlIHRoZSBET01cbiAgdmFyIHNlc3Npb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWlucHV0Jyk7XG4gIHZhciBpbmNUaW1lICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1pbmNyZWFzZScpO1xuICB2YXIgZGVjVGltZSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcbi8vICBCaW5kIGNsaWNrIGV2ZW50c1xuICBpbmNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2luY3JlbWVudCk7XG4gIGRlY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfZGVjcmVtZW50KTtcbi8vIFJlbmRlciB0aGUgaW5pdGlhbCB2YWx1ZSBmcm9tIHNlc3Npb25WYWx1ZVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSA1ID8gc2Vzc2lvbklucHV0LnRleHRDb250ZW50ID0gJzA1IG1pbicgOiBzZXNzaW9uSW5wdXQudGV4dENvbnRlbnQgPSBzZXNzaW9uVmFsdWUudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbmNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSAzNjAgPyAnJyA6IHNlc3Npb25WYWx1ZSArPSA1O1xuICAgIF9yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSA1ID8gJycgOiBzZXNzaW9uVmFsdWUgLT0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZSAoKSB7XG4gICAgIHJldHVybiBzZXNzaW9uVmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgICAgZ2V0VmFsdWUgOiBnZXRWYWx1ZVxuICB9O1xuXG59KSgpO1xuIiwidmFyIHRpbWVNYXJrZXJzID0gKGZ1bmN0aW9uKCl7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBtYXJrMCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0wJyk7XG4gIHZhciBtYXJrMSAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0xJyk7XG4gIHZhciBtYXJrMiAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0yJyk7XG4gIHZhciBtYXJrMyAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0zJyk7XG4gIHZhciBtYXJrNCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay00Jyk7XG4gIHZhciBpbmNUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIGRlY1RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfcmVuZGVyKTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9yZW5kZXIpO1xuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgbWFyazAudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDEpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcmsxLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiAyKSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrMi50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogMykpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gICAgbWFyazMudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDQpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcms0LnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiA1KSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxufSkoKTtcbiIsInZhciB0aW1lciA9IChmdW5jdGlvbigpIHtcbiAgdmFyIE5fUkVDVCAgICAgICAgICAgICAgICA9IDM2NDtcbiAgdmFyIHBsYXlPbiAgICAgICAgICAgICAgICA9IHRydWU7XG4gIHZhciBteVNlc3Npb25Db3VudGRvd24gICAgPSBudWxsO1xuICB2YXIgbXlCcmVha0NvdW50ZG93biAgICAgID0gbnVsbDtcbiAgdmFyIG15QnJlYWtJbm5lckNvdW50ZG93biA9IG51bGw7XG4gIHZhciBsb29wVGltZXIgICAgICAgICAgICAgPSBudWxsO1xuICB2YXIgZGlzYWJsZSAgICAgICAgICAgICAgID0gZmFsc2U7XG4gIHZhciBwbGF5QnRuICAgICAgICAgICAgICAgPSB0cnVlO1xuICB2YXIgbWludXRlICAgICAgICAgICAgICAgID0gNjAwMDA7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciB0aW1lcldyYXBwZXIgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVyLXdyYXBwZXInKTtcbiAgdmFyIHN0YXJ0ICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtYnRuJyk7XG4gIHZhciBzZXNzaW9uSW5jQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIHNlc3Npb25EZWNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuICB2YXIgYnJlYWtJbmNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbmNyZWFzZScpO1xuICB2YXIgYnJlYWtEZWNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1kZWNyZWFzZScpO1xuICB2YXIgY29tbWl0Q291bnQgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21taXQtY291bnQnKTtcbiAgdmFyIGhlYWRsaW5lICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGxpbmUnKTtcbi8vIEJpbmQgY2xpY2sgZXZlbnRzXG4gIHN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2NvdW50ZG93blN3aXRjaCk7XG4vLyBSZW5kZXIgdGhlIHRpbWVyIGRpc3BsYXlcblxuX3VwZGF0ZU51bWJlck9mUmVjdGFuZ2xlcygpO1xuXG4gIGZ1bmN0aW9uIF91cGRhdGVOdW1iZXJPZlJlY3RhbmdsZXMoKSB7XG4gICAgdmFyIGQgICAgICAgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciB3ZWVrRGF5ID0gZC5nZXREYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2Vla0RheTsgaSsrKSB7XG4gICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInJlY3RcIiArIChOX1JFQ1QgKyAxICsgaSkgKTtcbiAgICAgIGRpdi5jbGFzc05hbWUgKz0gXCIgcmVjdFwiO1xuICAgICAgdGltZXJXcmFwcGVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxuICAgIE5fUkVDVCA9IE5fUkVDVCArIHdlZWtEYXk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVuZGVyKGlkLCB0eXBlKSB7XG4gICAgdmFyIHJlY3RhbmdsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWN0JyArIGlkKTtcbiAgICB2YXIgcmVnICAgICAgID0gbmV3IFJlZ0V4cCgnKF58ICknKyAncmVjdC1hbmltYXRlLWNvbG9yJyArJygkfCApJywnZycpO1xuXG4gICAgdHlwZSA9PT0gJ3Nlc3Npb24nID8gcmVjdGFuZ2xlLmNsYXNzTmFtZSArPSBcIiByZWN0LWFuaW1hdGUtY29sb3JcIiA6IHJlY3RhbmdsZS5jbGFzc05hbWUgPSByZWN0YW5nbGUuY2xhc3NOYW1lLnJlcGxhY2UocmVnLCcgJyk7XG4gIH1cblxuICBmdW5jdGlvbiBfY291bnRkb3duU3dpdGNoKCkge1xuICAgIGlmKHBsYXlCdG4pIHtcbiAgICAgIHBsYXlCdG4gPSBmYWxzZTtcbiAgICAgIHN0YXJ0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4uL2ltZy9yZWxvYWQtaWNvbi5zdmcpXCI7XG4gICAgICBfc3RhcnRDb3VudGRvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGxheUJ0biA9IHRydWU7XG4gICAgICBzdGFydC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCguLi9pbWcvcGxheS1pY29uLnN2ZylcIjtcbiAgICAgIF9yZXNldFRpbWVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3Jlc2V0VGltZXIoKSB7XG4gICAgX2Rpc2FibGVCdG5zKGZhbHNlKTtcbiAgICBkaXNhYmxlID0gZmFsc2U7XG4gICAgcGxheU9uID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KG15U2Vzc2lvbkNvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KG15QnJlYWtDb3VudGRvd24pO1xuICAgIGNsZWFyVGltZW91dChteUJyZWFrSW5uZXJDb3VudGRvd24pO1xuICAgIGNsZWFyVGltZW91dChsb29wVGltZXIpO1xuICAgIGNsZWFyVGltZW91dChjb21taXRVcGRhdGUpO1xuICAgIGNvbW1pdENvdW50LnRleHRDb250ZW50ID0gJzAgY29udHJpYnV0aW9ucyBpbiB0aGUgY3VycmVudCBzZXNzaW9uJztcbiAgICBkaXNwbGF5VmFsdWUgPSBzZXRTZXNzaW9uLmdldFZhbHVlKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gTl9SRUNUOyBpKyspIHtcbiAgICAgIF9yZW5kZXIoaSwncmVzZXQnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRDb3VudGRvd24oKSB7XG4gICAgdmFyIHNlc3Npb25UaW1lICAgICA9IHNldFNlc3Npb24uZ2V0VmFsdWUoKTtcbiAgICB2YXIgYnJlYWtUaW1lICAgICAgID0gc2V0QnJlYWsuZ2V0VmFsdWUoKTtcbiAgICB2YXIgcmVjdFNlc3Npb25UaW1lID0gc2Vzc2lvblRpbWUgLyBOX1JFQ1Q7XG4gICAgdmFyIHJlY3RCcmVha1RpbWUgICA9IGJyZWFrVGltZSAvIE5fUkVDVDtcbiAgICB2YXIgY29tbWl0VGltZSAgICAgID0gcmVjdFNlc3Npb25UaW1lIC8gNDtcbiAgICB2YXIgYyAgICAgICAgICAgICAgID0gMDtcbiAgICB2YXIgcyAgICAgICAgICAgICAgID0gMDtcbiAgICB2YXIgYiAgICAgICAgICAgICAgID0gMDtcbiAgICBwbGF5T24gICAgICAgICAgICAgID0gdHJ1ZTtcblxuICAgIGlmKCFkaXNhYmxlKSB7XG4gICAgX2Rpc2FibGVCdG5zKHRydWUpO1xuICAgIH1cblxuICAgIGNvbW1pdFVwZGF0ZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgY29tbWl0Q291bnQudGV4dENvbnRlbnQgPSBjLnRvU3RyaW5nKCkgKyAnIGNvbnRyaWJ1dGlvbnMgaW4gdGhlIGN1cnJlbnQgc2Vzc2lvbic7XG4gICAgICBjKys7XG4gICAgfSwgY29tbWl0VGltZSAqIG1pbnV0ZSk7XG5cbiAgICBteVNlc3Npb25Db3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGlmKHMgPD0gTl9SRUNUKSB7XG4gICAgICAgIF9yZW5kZXIocywnc2Vzc2lvbicpO1xuICAgICAgICBzKys7XG4gICAgICB9XG4gICAgfSwgcmVjdFNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIG15QnJlYWtDb3VudGRvd24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFyVGltZW91dChjb21taXRVcGRhdGUpO1xuICAgICAgY29tbWl0Q291bnQudGV4dENvbnRlbnQgPSAnV0FSTklORzogdGhlIGRhdGFiYXNlIHNlcnZlciBoYXMgZ29uZSBhd2F5ISBUYWtlIGEgYnJlYWsuLi4nO1xuICAgICAgbXlCcmVha0lubmVyQ291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKGIgPD0gTl9SRUNUKSB7XG4gICAgICAgICAgX3JlbmRlcihiLCdicmVhaycpO1xuICAgICAgICAgIGIrKztcbiAgICAgICAgfVxuICAgICAgfSwgcmVjdEJyZWFrVGltZSAqIG1pbnV0ZSk7XG4gICAgfSwgc2Vzc2lvblRpbWUgKiBtaW51dGUpO1xuXG4gICAgbG9vcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dChteVNlc3Npb25Db3VudGRvd24pO1xuICAgICAgY2xlYXJUaW1lb3V0KG15QnJlYWtDb3VudGRvd24pO1xuICAgICAgY2xlYXJUaW1lb3V0KG15QnJlYWtJbm5lckNvdW50ZG93bik7XG4gICAgICBjbGVhclRpbWVvdXQoY29tbWl0VXBkYXRlKTtcbiAgICAgIGlmIChwbGF5T24pIHtcbiAgICAgICAgIF9zdGFydENvdW50ZG93bigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sKHNlc3Npb25UaW1lICsgYnJlYWtUaW1lKSAqIG1pbnV0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGlzYWJsZUJ0bnMoZGlzYWJsZSkge1xuICAgIGlmKGRpc2FibGUgPT09IGZhbHNlKSB7XG4gICAgICBzZXNzaW9uSW5jQnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBzZXNzaW9uSW5jQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y3ZjlmYVwiO1xuICAgICAgc2Vzc2lvbkRlY0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgc2Vzc2lvbkRlY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmN2Y5ZmFcIjtcbiAgICAgIGJyZWFrSW5jQnRuLmRpc2FibGVkICAgPSBmYWxzZTtcbiAgICAgIGJyZWFrSW5jQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciAgID0gXCIjZjdmOWZhXCI7XG4gICAgICBicmVha0RlY0J0bi5kaXNhYmxlZCAgID0gZmFsc2U7XG4gICAgICBicmVha0RlY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgICA9IFwiI2Y3ZjlmYVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXNzaW9uSW5jQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNlc3Npb25JbmNCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjQkNCQ0JDXCI7XG4gICAgICBzZXNzaW9uRGVjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNlc3Npb25EZWNCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjQkNCQ0JDXCI7XG4gICAgICBicmVha0luY0J0bi5kaXNhYmxlZCAgID0gdHJ1ZTtcbiAgICAgIGJyZWFrSW5jQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciAgID0gXCIjQkNCQ0JDXCI7XG4gICAgICBicmVha0RlY0J0bi5kaXNhYmxlZCAgID0gdHJ1ZTtcbiAgICAgIGJyZWFrRGVjQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciAgID0gXCIjQkNCQ0JDXCI7XG4gICAgfVxuICB9XG5cbn0pKCk7XG4iXX0=
