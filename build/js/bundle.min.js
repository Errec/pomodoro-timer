function addZero(e){return e>9?""+e:"0"+e}!function(e){function t(){do{r==i?r=0:r++}while(o.hasOwnProperty(r));return r}if(!/MSIE 10/i.test(navigator.userAgent))try{var n=new Blob(["var fakeIdToId = {};onmessage = function (event) {  var data = event.data,    name = data.name,    fakeId = data.fakeId,    time;  if(data.hasOwnProperty('time')) {    time = data.time;  }  switch (name) {    case 'setInterval':      fakeIdToId[fakeId] = setInterval(function () {        postMessage({fakeId: fakeId});      }, time);      break;    case 'clearInterval':      if (fakeIdToId.hasOwnProperty (fakeId)) {        clearInterval(fakeIdToId[fakeId]);        delete fakeIdToId[fakeId];      }      break;    case 'setTimeout':      fakeIdToId[fakeId] = setTimeout(function () {        postMessage({fakeId: fakeId});        if (fakeIdToId.hasOwnProperty (fakeId)) {          delete fakeIdToId[fakeId];        }      }, time);      break;    case 'clearTimeout':      if (fakeIdToId.hasOwnProperty (fakeId)) {        clearTimeout(fakeIdToId[fakeId]);        delete fakeIdToId[fakeId];      }      break;  }}"]);e=window.URL.createObjectURL(n)}catch(e){}var a,o={},r=0,i=2147483647,s="HackTimer.js by turuslan: ";if("undefined"!=typeof Worker)try{a=new Worker(e),window.setInterval=function(e,n){var r=t();return o[r]={callback:e,parameters:Array.prototype.slice.call(arguments,2)},a.postMessage({name:"setInterval",fakeId:r,time:n}),r},window.clearInterval=function(e){o.hasOwnProperty(e)&&(delete o[e],a.postMessage({name:"clearInterval",fakeId:e}))},window.setTimeout=function(e,n){var r=t();return o[r]={callback:e,parameters:Array.prototype.slice.call(arguments,2),isTimeout:!0},a.postMessage({name:"setTimeout",fakeId:r,time:n}),r},window.clearTimeout=function(e){o.hasOwnProperty(e)&&(delete o[e],a.postMessage({name:"clearTimeout",fakeId:e}))},a.onmessage=function(e){var t,n,a,r=e.data,i=r.fakeId;if(o.hasOwnProperty(i)&&(t=o[i],a=t.callback,n=t.parameters,t.hasOwnProperty("isTimeout")&&t.isTimeout&&delete o[i]),"string"==typeof a)try{a=new Function(a)}catch(e){console.log(s+"Error parsing callback code string: ",e)}"function"==typeof a&&a.apply(window,n)},a.onerror=function(e){console.log(e)},console.log(s+"Initialisation succeeded")}catch(e){console.log(s+"Initialisation failed"),console.error(e)}else console.log(s+"Initialisation failed - HTML5 Web Worker is not supported")}("HackTimerWorker.js");var setBreak=function(){function e(){r.textContent=5===o?"05 min":o.toString()+" min"}function t(){60===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function a(){return o}var o=.2,r=document.getElementById("break-input"),i=document.getElementById("break-increase"),s=document.getElementById("break-decrease");return i.addEventListener("click",t),s.addEventListener("click",n),{getValue:a}}(),setSession=function(){function e(){r.textContent=5===o?"05 min":o.toString()+" min"}function t(){360===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function a(){return o}var o=.2,r=document.getElementById("session-input"),i=document.getElementById("session-increase"),s=document.getElementById("session-decrease");return i.addEventListener("click",t),s.addEventListener("click",n),{getValue:a}}(),timeMarkers=function(){function e(){t.textContent=addZero(Math.floor(setSession.getValue()/5*1)).toString()+" min",n.textContent=addZero(Math.floor(setSession.getValue()/5*2)).toString()+" min",a.textContent=addZero(Math.floor(setSession.getValue()/5*3)).toString()+" min",o.textContent=addZero(Math.floor(setSession.getValue()/5*4)).toString()+" min",r.textContent=addZero(Math.floor(setSession.getValue()/5*5)).toString()+" min"}var t=document.getElementById("time-mark-0"),n=document.getElementById("time-mark-1"),a=document.getElementById("time-mark-2"),o=document.getElementById("time-mark-3"),r=document.getElementById("time-mark-4"),i=document.getElementById("session-increase"),s=document.getElementById("session-decrease");i.addEventListener("click",e),s.addEventListener("click",e)}(),timer=function(){function e(e,t){var n=document.getElementById("rect"+e),a=new RegExp("(^| )rect-animate-color($| )","g");"session"===t?n.className+=" rect-animate-color":n.className=n.className.replace(a," ")}function t(){u?(u=!1,k.style.backgroundImage="url(../img/reload-icon.svg)",a()):(u=!0,k.style.backgroundImage="url(../img/play-icon.svg)",n())}function n(){o(!1),m=!1,i=!1,clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(l),clearTimeout(commitUpdate),v.textContent="0 contributions in the current session",displayValue=setSession.getValue();for(var t=0;t<=r;t++)e(t,"reset")}function a(){var t=setSession.getValue(),n=setBreak.getValue(),u=t/r,I=n/r,k=u/4,g=0,y=0,p=0;i=!0,m||o(!0),commitUpdate=setInterval(function(){v.textContent=g.toString()+" contributions in the current session",g++},k*f),s=setInterval(function(){y<=r&&(e(y,"session"),y++)},u*f),d=setTimeout(function(){clearTimeout(commitUpdate),v.textContent="WARNING: the database server has gone away! Take a break...",c=setInterval(function(){p<=r&&(e(p,"break"),p++)},I*f)},t*f),l=setTimeout(function(){clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(commitUpdate),i&&a()},(t+n)*f)}function o(e){!1===e?(g.disabled=!1,g.style.backgroundColor="#f7f9fa",y.disabled=!1,y.style.backgroundColor="#f7f9fa",p.disabled=!1,p.style.backgroundColor="#f7f9fa",b.disabled=!1,b.style.backgroundColor="#f7f9fa"):(g.disabled=!0,g.style.backgroundColor="#BCBCBC",y.disabled=!0,y.style.backgroundColor="#BCBCBC",p.disabled=!0,p.style.backgroundColor="#BCBCBC",b.disabled=!0,b.style.backgroundColor="#BCBCBC")}var r=364,i=!0,s=null,d=null,c=null,l=null,m=!1,u=!0,f=6e4,I=document.getElementById("timer-wrapper"),k=document.getElementById("start-btn"),g=document.getElementById("session-increase"),y=document.getElementById("session-decrease"),p=document.getElementById("break-increase"),b=document.getElementById("break-decrease"),v=document.getElementById("commit-count");document.getElementById("headline");k.addEventListener("click",t),function(){for(var e=new Date,t=e.getDay(),n=0;n<t;n++){var a=document.createElement("div");a.setAttribute("id","rect"+(r+1+n)),a.className+=" rect",I.appendChild(a)}r+=t}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJIYWNrVGltZXIuanMiLCJzZXRCcmVhay5qcyIsInNldFNlc3Npb24uanMiLCJ0aW1lTWFya2Vycy5qcyIsInRpbWVyLmpzIl0sIm5hbWVzIjpbImFkZFplcm8iLCJuIiwid29ya2VyU2NyaXB0IiwiZ2V0RmFrZUlkIiwibGFzdEZha2VJZCIsIm1heEZha2VJZCIsImZha2VJZFRvQ2FsbGJhY2siLCJoYXNPd25Qcm9wZXJ0eSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJibG9iIiwiQmxvYiIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImVycm9yIiwid29ya2VyIiwibG9nUHJlZml4IiwiV29ya2VyIiwic2V0SW50ZXJ2YWwiLCJjYWxsYmFjayIsInRpbWUiLCJmYWtlSWQiLCJwYXJhbWV0ZXJzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJwb3N0TWVzc2FnZSIsIm5hbWUiLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsImlzVGltZW91dCIsImNsZWFyVGltZW91dCIsIm9ubWVzc2FnZSIsImV2ZW50IiwicmVxdWVzdCIsImRhdGEiLCJGdW5jdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJhcHBseSIsIm9uZXJyb3IiLCJzZXRCcmVhayIsIl9yZW5kZXIiLCJicmVha0lucHV0IiwidGV4dENvbnRlbnQiLCJicmVha1ZhbHVlIiwidG9TdHJpbmciLCJfaW5jcmVtZW50IiwiX2RlY3JlbWVudCIsImdldFZhbHVlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImluY1RpbWUiLCJkZWNUaW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFNlc3Npb24iLCJzZXNzaW9uSW5wdXQiLCJzZXNzaW9uVmFsdWUiLCJ0aW1lTWFya2VycyIsIm1hcmswIiwiTWF0aCIsImZsb29yIiwibWFyazEiLCJtYXJrMiIsIm1hcmszIiwibWFyazQiLCJ0aW1lciIsImlkIiwidHlwZSIsInJlY3RhbmdsZSIsInJlZyIsIlJlZ0V4cCIsImNsYXNzTmFtZSIsInJlcGxhY2UiLCJfY291bnRkb3duU3dpdGNoIiwicGxheUJ0biIsInN0YXJ0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfc3RhcnRDb3VudGRvd24iLCJfcmVzZXRUaW1lciIsIl9kaXNhYmxlQnRucyIsImRpc2FibGUiLCJwbGF5T24iLCJteVNlc3Npb25Db3VudGRvd24iLCJteUJyZWFrQ291bnRkb3duIiwibXlCcmVha0lubmVyQ291bnRkb3duIiwibG9vcFRpbWVyIiwiY29tbWl0VXBkYXRlIiwiY29tbWl0Q291bnQiLCJkaXNwbGF5VmFsdWUiLCJpIiwiTl9SRUNUIiwic2Vzc2lvblRpbWUiLCJicmVha1RpbWUiLCJyZWN0U2Vzc2lvblRpbWUiLCJyZWN0QnJlYWtUaW1lIiwiY29tbWl0VGltZSIsImMiLCJzIiwiYiIsIm1pbnV0ZSIsInNlc3Npb25JbmNCdG4iLCJkaXNhYmxlZCIsImJhY2tncm91bmRDb2xvciIsInNlc3Npb25EZWNCdG4iLCJicmVha0luY0J0biIsImJyZWFrRGVjQnRuIiwidGltZXJXcmFwcGVyIiwiZCIsIkRhdGUiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUEsRUFBQSxHQUFBQSxFQUFBLElBQUFBLEdDREEsU0FBQUMsR0E0REEsUUFBQUMsS0FDQSxHQUNBQyxHQUFBQyxFQUNBRCxFQUFBLEVBRUFBLFVBRUFFLEVBQUFDLGVBQUFILEdBQ0EsT0FBQUEsR0E3REEsSUFBQSxXQUFBSSxLQUFBQyxVQUFBQyxXQUNBLElBQ0EsR0FBQUMsR0FBQSxHQUFBQyxPQUFBLHE1QkF3Q0FWLEdBQUFXLE9BQUFDLElBQUFDLGdCQUFBSixHQUNBLE1BQUFLLElBSUEsR0FBQUMsR0FDQVgsS0FDQUYsRUFBQSxFQUNBQyxFQUFBLFdBQ0FhLEVB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RixVQUFBLEVBQ0FFLEVBQUE1QixNQUFBMkIsZ0JBQUEsVUFDQUUsRUFBQUgsVUFBQSxFQUNBRyxFQUFBN0IsTUFBQTJCLGdCQUFBLFVBQ0FHLEVBQUFKLFVBQUEsRUFDQUksRUFBQTlCLE1BQUEyQixnQkFBQSxXQTdJQSxHQUFBWixHQUFBLElBQ0FULEdBQUEsRUFDQUMsRUFBQSxLQUNBQyxFQUFBLEtBQ0FDLEVBQUEsS0FDQUMsRUFBQSxLQUNBTCxHQUFBLEVBQ0FQLEdBQUEsRUFDQTBCLEVBQUEsSUFFQU8sRUFBQTFELFNBQUFDLGVBQUEsaUJBQ0F5QixFQUFBMUIsU0FBQUMsZUFBQSxhQUNBbUQsRUFBQXBELFNBQUFDLGVBQUEsb0JBQ0FzRCxFQUFBdkQsU0FBQUMsZUFBQSxvQkFDQXVELEVBQUF4RCxTQUFBQyxlQUFBLGtCQUNBd0QsRUFBQXpELFNBQUFDLGVBQUEsa0JBQ0FzQyxFQUFBdkMsU0FBQUMsZUFBQSxlQUNBRCxVQUFBQyxlQUFBLFdBRUF5QixHQUFBdEIsaUJBQUEsUUFBQW9CLEdBS0EsV0FJQSxJQUFBLEdBSEFtQyxHQUFBLEdBQUFDLE1BQ0FDLEVBQUFGLEVBQUFHLFNBRUFyQixFQUFBLEVBQUFBLEVBQUFvQixFQUFBcEIsSUFBQSxDQUNBLEdBQUFzQixHQUFBL0QsU0FBQWdFLGNBQUEsTUFDQUQsR0FBQUUsYUFBQSxLQUFBLFFBQUF2QixFQUFBLEVBQUFELElBQ0FzQixFQUFBekMsV0FBQSxRQUNBb0MsRUFBQVEsWUFBQUgsR0FFQXJCLEdBQUFtQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIGZ1bmN0aW9uIGFkZFplcm8obikge1xuICAgIHJldHVybiBuID4gOSA/IFwiXCIgKyBuOiBcIjBcIiArIG47XG4gIH1cbiIsIihmdW5jdGlvbiAod29ya2VyU2NyaXB0KSB7XG5cbi8qXG5vcmlnaW5hbCBjb2RlIGZyb206XG5odHRwczovL2dpdGh1Yi5jb20vdHVydXNsYW4vSGFja1RpbWVyXG4qL1xuXG4gIGlmICghL01TSUUgMTAvaS50ZXN0IChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iIChbXCJcXFxudmFyIGZha2VJZFRvSWQgPSB7fTtcXFxub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XFxcbiAgdmFyIGRhdGEgPSBldmVudC5kYXRhLFxcXG4gICAgbmFtZSA9IGRhdGEubmFtZSxcXFxuICAgIGZha2VJZCA9IGRhdGEuZmFrZUlkLFxcXG4gICAgdGltZTtcXFxuICBpZihkYXRhLmhhc093blByb3BlcnR5KCd0aW1lJykpIHtcXFxuICAgIHRpbWUgPSBkYXRhLnRpbWU7XFxcbiAgfVxcXG4gIHN3aXRjaCAobmFtZSkge1xcXG4gICAgY2FzZSAnc2V0SW50ZXJ2YWwnOlxcXG4gICAgICBmYWtlSWRUb0lkW2Zha2VJZF0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XFxcbiAgICAgICAgcG9zdE1lc3NhZ2Uoe2Zha2VJZDogZmFrZUlkfSk7XFxcbiAgICAgIH0sIHRpbWUpO1xcXG4gICAgICBicmVhaztcXFxuICAgIGNhc2UgJ2NsZWFySW50ZXJ2YWwnOlxcXG4gICAgICBpZiAoZmFrZUlkVG9JZC5oYXNPd25Qcm9wZXJ0eSAoZmFrZUlkKSkge1xcXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoZmFrZUlkVG9JZFtmYWtlSWRdKTtcXFxuICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICB9XFxcbiAgICAgIGJyZWFrO1xcXG4gICAgY2FzZSAnc2V0VGltZW91dCc6XFxcbiAgICAgIGZha2VJZFRvSWRbZmFrZUlkXSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcXG4gICAgICAgIHBvc3RNZXNzYWdlKHtmYWtlSWQ6IGZha2VJZH0pO1xcXG4gICAgICAgIGlmIChmYWtlSWRUb0lkLmhhc093blByb3BlcnR5IChmYWtlSWQpKSB7XFxcbiAgICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICAgIH1cXFxuICAgICAgfSwgdGltZSk7XFxcbiAgICAgIGJyZWFrO1xcXG4gICAgY2FzZSAnY2xlYXJUaW1lb3V0JzpcXFxuICAgICAgaWYgKGZha2VJZFRvSWQuaGFzT3duUHJvcGVydHkgKGZha2VJZCkpIHtcXFxuICAgICAgICBjbGVhclRpbWVvdXQoZmFrZUlkVG9JZFtmYWtlSWRdKTtcXFxuICAgICAgICBkZWxldGUgZmFrZUlkVG9JZFtmYWtlSWRdO1xcXG4gICAgICB9XFxcbiAgICAgIGJyZWFrO1xcXG4gIH1cXFxufVxcXG5cIl0pO1xuICAgICAgLy8gT2J0YWluIGEgYmxvYiBVUkwgcmVmZXJlbmNlIHRvIG91ciB3b3JrZXIgJ2ZpbGUnLlxuICAgICAgd29ya2VyU2NyaXB0ID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8qIEJsb2IgaXMgbm90IHN1cHBvcnRlZCwgdXNlIGV4dGVybmFsIHNjcmlwdCBpbnN0ZWFkICovXG4gICAgfVxuICB9XG4gIHZhciB3b3JrZXIsXG4gICAgZmFrZUlkVG9DYWxsYmFjayA9IHt9LFxuICAgIGxhc3RGYWtlSWQgPSAwLFxuICAgIG1heEZha2VJZCA9IDB4N0ZGRkZGRkYsIC8vIDIgXiAzMSAtIDEsIDMxIGJpdCwgcG9zaXRpdmUgdmFsdWVzIG9mIHNpZ25lZCAzMiBiaXQgaW50ZWdlclxuICAgIGxvZ1ByZWZpeCA9ICdIYWNrVGltZXIuanMgYnkgdHVydXNsYW46ICc7XG4gIGlmICh0eXBlb2YgKFdvcmtlcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZnVuY3Rpb24gZ2V0RmFrZUlkICgpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKGxhc3RGYWtlSWQgPT0gbWF4RmFrZUlkKSB7XG4gICAgICAgICAgbGFzdEZha2VJZCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdEZha2VJZCArKztcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eSAobGFzdEZha2VJZCkpO1xuICAgICAgcmV0dXJuIGxhc3RGYWtlSWQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3b3JrZXIgPSBuZXcgV29ya2VyICh3b3JrZXJTY3JpcHQpO1xuICAgICAgd2luZG93LnNldEludGVydmFsID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aW1lIC8qICwgcGFyYW1ldGVycyAqLykge1xuICAgICAgICB2YXIgZmFrZUlkID0gZ2V0RmFrZUlkICgpO1xuICAgICAgICBmYWtlSWRUb0NhbGxiYWNrW2Zha2VJZF0gPSB7XG4gICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgIHBhcmFtZXRlcnM6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMilcbiAgICAgICAgfTtcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlICh7XG4gICAgICAgICAgbmFtZTogJ3NldEludGVydmFsJyxcbiAgICAgICAgICBmYWtlSWQ6IGZha2VJZCxcbiAgICAgICAgICB0aW1lOiB0aW1lXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFrZUlkO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKGZha2VJZCkge1xuICAgICAgICBpZiAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eShmYWtlSWQpKSB7XG4gICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICAgIG5hbWU6ICdjbGVhckludGVydmFsJyxcbiAgICAgICAgICAgIGZha2VJZDogZmFrZUlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGltZSAvKiAsIHBhcmFtZXRlcnMgKi8pIHtcbiAgICAgICAgdmFyIGZha2VJZCA9IGdldEZha2VJZCAoKTtcbiAgICAgICAgZmFrZUlkVG9DYWxsYmFja1tmYWtlSWRdID0ge1xuICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICBwYXJhbWV0ZXJzOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgICAgIGlzVGltZW91dDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICBuYW1lOiAnc2V0VGltZW91dCcsXG4gICAgICAgICAgZmFrZUlkOiBmYWtlSWQsXG4gICAgICAgICAgdGltZTogdGltZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZha2VJZDtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKGZha2VJZCkge1xuICAgICAgICBpZiAoZmFrZUlkVG9DYWxsYmFjay5oYXNPd25Qcm9wZXJ0eShmYWtlSWQpKSB7XG4gICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UgKHtcbiAgICAgICAgICAgIG5hbWU6ICdjbGVhclRpbWVvdXQnLFxuICAgICAgICAgICAgZmFrZUlkOiBmYWtlSWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBldmVudC5kYXRhLFxuICAgICAgICAgIGZha2VJZCA9IGRhdGEuZmFrZUlkLFxuICAgICAgICAgIHJlcXVlc3QsXG4gICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICBjYWxsYmFjaztcbiAgICAgICAgaWYgKGZha2VJZFRvQ2FsbGJhY2suaGFzT3duUHJvcGVydHkoZmFrZUlkKSkge1xuICAgICAgICAgIHJlcXVlc3QgPSBmYWtlSWRUb0NhbGxiYWNrW2Zha2VJZF07XG4gICAgICAgICAgY2FsbGJhY2sgPSByZXF1ZXN0LmNhbGxiYWNrO1xuICAgICAgICAgIHBhcmFtZXRlcnMgPSByZXF1ZXN0LnBhcmFtZXRlcnM7XG4gICAgICAgICAgaWYgKHJlcXVlc3QuaGFzT3duUHJvcGVydHkgKCdpc1RpbWVvdXQnKSAmJiByZXF1ZXN0LmlzVGltZW91dCkge1xuICAgICAgICAgICAgZGVsZXRlIGZha2VJZFRvQ2FsbGJhY2tbZmFrZUlkXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbiAoY2FsbGJhY2spO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyAobG9nUHJlZml4ICsgJ0Vycm9yIHBhcnNpbmcgY2FsbGJhY2sgY29kZSBzdHJpbmc6ICcsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkgKHdpbmRvdywgcGFyYW1ldGVycyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyAoZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gc3VjY2VlZGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gZmFpbGVkJyk7XG4gICAgICBjb25zb2xlLmVycm9yIChlcnJvcik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nIChsb2dQcmVmaXggKyAnSW5pdGlhbGlzYXRpb24gZmFpbGVkIC0gSFRNTDUgV2ViIFdvcmtlciBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gIH1cbn0pICgnSGFja1RpbWVyV29ya2VyLmpzJyk7XG4iLCJ2YXIgc2V0QnJlYWsgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIGJyZWFrVmFsdWUgPSAwLjI7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBicmVha0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWlucHV0Jyk7XG4gIHZhciBpbmNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWRlY3JlYXNlJyk7XG4vLyAgQmluZCBjbGljayBldmVudHNcbiAgaW5jVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9pbmNyZW1lbnQpO1xuICBkZWNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2RlY3JlbWVudCk7XG4vLyBSZW5kZXIgdGhlIGluaXRpYWwgdmFsdWUgZnJvbSBicmVha1ZhbHVlXG5cbiAgZnVuY3Rpb24gX3JlbmRlcigpIHtcbiAgICBicmVha1ZhbHVlID09PSA1ID8gYnJlYWtJbnB1dC50ZXh0Q29udGVudCA9ICcwNSBtaW4nIDogYnJlYWtJbnB1dC50ZXh0Q29udGVudCA9IGJyZWFrVmFsdWUudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbmNyZW1lbnQoKSB7XG4gICAgYnJlYWtWYWx1ZSA9PT0gNjAgPyAnJyA6IGJyZWFrVmFsdWUgKz0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVjcmVtZW50KCkge1xuICAgIGJyZWFrVmFsdWUgPT09IDUgPyAnJyA6IGJyZWFrVmFsdWUgLT0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZSAoKSB7XG4gICAgIHJldHVybiBicmVha1ZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAgIGdldFZhbHVlIDogZ2V0VmFsdWVcbiAgfTtcblxufSkoKTtcbiIsInZhciBzZXRTZXNzaW9uID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBzZXNzaW9uVmFsdWUgPSAwLjI7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBzZXNzaW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1pbnB1dCcpO1xuICB2YXIgaW5jVGltZSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIGRlY1RpbWUgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWRlY3JlYXNlJyk7XG4vLyAgQmluZCBjbGljayBldmVudHNcbiAgaW5jVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9pbmNyZW1lbnQpO1xuICBkZWNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2RlY3JlbWVudCk7XG4vLyBSZW5kZXIgdGhlIGluaXRpYWwgdmFsdWUgZnJvbSBzZXNzaW9uVmFsdWVcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gNSA/IHNlc3Npb25JbnB1dC50ZXh0Q29udGVudCA9ICcwNSBtaW4nIDogc2Vzc2lvbklucHV0LnRleHRDb250ZW50ID0gc2Vzc2lvblZhbHVlLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cblxuICBmdW5jdGlvbiBfaW5jcmVtZW50KCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gMzYwID8gJycgOiBzZXNzaW9uVmFsdWUgKz0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVjcmVtZW50KCkge1xuICAgIHNlc3Npb25WYWx1ZSA9PT0gNSA/ICcnIDogc2Vzc2lvblZhbHVlIC09IDU7XG4gICAgX3JlbmRlcigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUgKCkge1xuICAgICByZXR1cm4gc2Vzc2lvblZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAgIGdldFZhbHVlIDogZ2V0VmFsdWVcbiAgfTtcblxufSkoKTtcbiIsInZhciB0aW1lTWFya2VycyA9IChmdW5jdGlvbigpe1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgbWFyazAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMCcpO1xuICB2YXIgbWFyazEgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMScpO1xuICB2YXIgbWFyazIgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMicpO1xuICB2YXIgbWFyazMgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstMycpO1xuICB2YXIgbWFyazQgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLW1hcmstNCcpO1xuICB2YXIgaW5jVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcblxuICBpbmNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3JlbmRlcik7XG4gIGRlY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfcmVuZGVyKTtcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIG1hcmswLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiAxKSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrMS50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogMikpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gICAgbWFyazIudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDMpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcmszLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiA0KSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrNC50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogNSkpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gIH1cbn0pKCk7XG4iLCJ2YXIgdGltZXIgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBOX1JFQ1QgICAgICAgICAgICAgICAgPSAzNjQ7XG4gIHZhciBwbGF5T24gICAgICAgICAgICAgICAgPSB0cnVlO1xuICB2YXIgbXlTZXNzaW9uQ291bnRkb3duICAgID0gbnVsbDtcbiAgdmFyIG15QnJlYWtDb3VudGRvd24gICAgICA9IG51bGw7XG4gIHZhciBteUJyZWFrSW5uZXJDb3VudGRvd24gPSBudWxsO1xuICB2YXIgbG9vcFRpbWVyICAgICAgICAgICAgID0gbnVsbDtcbiAgdmFyIGRpc2FibGUgICAgICAgICAgICAgICA9IGZhbHNlO1xuICB2YXIgcGxheUJ0biAgICAgICAgICAgICAgID0gdHJ1ZTtcbiAgdmFyIG1pbnV0ZSAgICAgICAgICAgICAgICA9IDYwMDAwO1xuLy8gQ2FjaGUgdGhlIERPTVxuICB2YXIgdGltZXJXcmFwcGVyICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lci13cmFwcGVyJyk7XG4gIHZhciBzdGFydCAgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0LWJ0bicpO1xuICB2YXIgc2Vzc2lvbkluY0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWluY3JlYXNlJyk7XG4gIHZhciBzZXNzaW9uRGVjQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tZGVjcmVhc2UnKTtcbiAgdmFyIGJyZWFrSW5jQnRuICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWstaW5jcmVhc2UnKTtcbiAgdmFyIGJyZWFrRGVjQnRuICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWstZGVjcmVhc2UnKTtcbiAgdmFyIGNvbW1pdENvdW50ICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWl0LWNvdW50Jyk7XG4gIHZhciBoZWFkbGluZSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlYWRsaW5lJyk7XG4vLyBCaW5kIGNsaWNrIGV2ZW50c1xuICBzdGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9jb3VudGRvd25Td2l0Y2gpO1xuLy8gUmVuZGVyIHRoZSB0aW1lciBkaXNwbGF5XG5cbl91cGRhdGVOdW1iZXJPZlJlY3RhbmdsZXMoKTtcblxuICBmdW5jdGlvbiBfdXBkYXRlTnVtYmVyT2ZSZWN0YW5nbGVzKCkge1xuICAgIHZhciBkICAgICAgID0gbmV3IERhdGUoKTtcbiAgICB2YXIgd2Vla0RheSA9IGQuZ2V0RGF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdlZWtEYXk7IGkrKykge1xuICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJyZWN0XCIgKyAoTl9SRUNUICsgMSArIGkpICk7XG4gICAgICBkaXYuY2xhc3NOYW1lICs9IFwiIHJlY3RcIjtcbiAgICAgIHRpbWVyV3JhcHBlci5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cbiAgICBOX1JFQ1QgPSBOX1JFQ1QgKyB3ZWVrRGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlbmRlcihpZCwgdHlwZSkge1xuICAgIHZhciByZWN0YW5nbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjdCcgKyBpZCk7XG4gICAgdmFyIHJlZyAgICAgICA9IG5ldyBSZWdFeHAoJyhefCApJysgJ3JlY3QtYW5pbWF0ZS1jb2xvcicgKycoJHwgKScsJ2cnKTtcblxuICAgIHR5cGUgPT09ICdzZXNzaW9uJyA/IHJlY3RhbmdsZS5jbGFzc05hbWUgKz0gXCIgcmVjdC1hbmltYXRlLWNvbG9yXCIgOiByZWN0YW5nbGUuY2xhc3NOYW1lID0gcmVjdGFuZ2xlLmNsYXNzTmFtZS5yZXBsYWNlKHJlZywnICcpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NvdW50ZG93blN3aXRjaCgpIHtcbiAgICBpZihwbGF5QnRuKSB7XG4gICAgICBwbGF5QnRuID0gZmFsc2U7XG4gICAgICBzdGFydC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCguLi9pbWcvcmVsb2FkLWljb24uc3ZnKVwiO1xuICAgICAgX3N0YXJ0Q291bnRkb3duKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXlCdG4gPSB0cnVlO1xuICAgICAgc3RhcnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi4vaW1nL3BsYXktaWNvbi5zdmcpXCI7XG4gICAgICBfcmVzZXRUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZXNldFRpbWVyKCkge1xuICAgIF9kaXNhYmxlQnRucyhmYWxzZSk7XG4gICAgZGlzYWJsZSA9IGZhbHNlO1xuICAgIHBsYXlPbiA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dChteVNlc3Npb25Db3VudGRvd24pO1xuICAgIGNsZWFyVGltZW91dChteUJyZWFrQ291bnRkb3duKTtcbiAgICBjbGVhclRpbWVvdXQobXlCcmVha0lubmVyQ291bnRkb3duKTtcbiAgICBjbGVhclRpbWVvdXQobG9vcFRpbWVyKTtcbiAgICBjbGVhclRpbWVvdXQoY29tbWl0VXBkYXRlKTtcbiAgICBjb21taXRDb3VudC50ZXh0Q29udGVudCA9ICcwIGNvbnRyaWJ1dGlvbnMgaW4gdGhlIGN1cnJlbnQgc2Vzc2lvbic7XG4gICAgZGlzcGxheVZhbHVlID0gc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IE5fUkVDVDsgaSsrKSB7XG4gICAgICBfcmVuZGVyKGksJ3Jlc2V0Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0Q291bnRkb3duKCkge1xuICAgIHZhciBzZXNzaW9uVGltZSAgICAgPSBzZXRTZXNzaW9uLmdldFZhbHVlKCk7XG4gICAgdmFyIGJyZWFrVGltZSAgICAgICA9IHNldEJyZWFrLmdldFZhbHVlKCk7XG4gICAgdmFyIHJlY3RTZXNzaW9uVGltZSA9IHNlc3Npb25UaW1lIC8gTl9SRUNUO1xuICAgIHZhciByZWN0QnJlYWtUaW1lICAgPSBicmVha1RpbWUgLyBOX1JFQ1Q7XG4gICAgdmFyIGNvbW1pdFRpbWUgICAgICA9IHJlY3RTZXNzaW9uVGltZSAvIDQ7XG4gICAgdmFyIGMgICAgICAgICAgICAgICA9IDA7XG4gICAgdmFyIHMgICAgICAgICAgICAgICA9IDA7XG4gICAgdmFyIGIgICAgICAgICAgICAgICA9IDA7XG4gICAgcGxheU9uICAgICAgICAgICAgICA9IHRydWU7XG5cbiAgICBpZighZGlzYWJsZSkge1xuICAgIF9kaXNhYmxlQnRucyh0cnVlKTtcbiAgICB9XG5cbiAgICBjb21taXRVcGRhdGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGNvbW1pdENvdW50LnRleHRDb250ZW50ID0gYy50b1N0cmluZygpICsgJyBjb250cmlidXRpb25zIGluIHRoZSBjdXJyZW50IHNlc3Npb24nO1xuICAgICAgYysrO1xuICAgIH0sIGNvbW1pdFRpbWUgKiBtaW51dGUpO1xuXG4gICAgbXlTZXNzaW9uQ291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBpZihzIDw9IE5fUkVDVCkge1xuICAgICAgICBfcmVuZGVyKHMsJ3Nlc3Npb24nKTtcbiAgICAgICAgcysrO1xuICAgICAgfVxuICAgIH0sIHJlY3RTZXNzaW9uVGltZSAqIG1pbnV0ZSk7XG5cbiAgICBteUJyZWFrQ291bnRkb3duID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBjbGVhclRpbWVvdXQoY29tbWl0VXBkYXRlKTtcbiAgICAgIGNvbW1pdENvdW50LnRleHRDb250ZW50ID0gJ1dBUk5JTkc6IHRoZSBkYXRhYmFzZSBzZXJ2ZXIgaGFzIGdvbmUgYXdheSEgVGFrZSBhIGJyZWFrLi4uJztcbiAgICAgIG15QnJlYWtJbm5lckNvdW50ZG93biA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihiIDw9IE5fUkVDVCkge1xuICAgICAgICAgIF9yZW5kZXIoYiwnYnJlYWsnKTtcbiAgICAgICAgICBiKys7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlY3RCcmVha1RpbWUgKiBtaW51dGUpO1xuICAgIH0sIHNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIGxvb3BUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQobXlTZXNzaW9uQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrSW5uZXJDb3VudGRvd24pO1xuICAgICAgY2xlYXJUaW1lb3V0KGNvbW1pdFVwZGF0ZSk7XG4gICAgICBpZiAocGxheU9uKSB7XG4gICAgICAgICBfc3RhcnRDb3VudGRvd24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LChzZXNzaW9uVGltZSArIGJyZWFrVGltZSkgKiBtaW51dGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2Rpc2FibGVCdG5zKGRpc2FibGUpIHtcbiAgICBpZihkaXNhYmxlID09PSBmYWxzZSkge1xuICAgICAgc2Vzc2lvbkluY0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgc2Vzc2lvbkluY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmN2Y5ZmFcIjtcbiAgICAgIHNlc3Npb25EZWNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNlc3Npb25EZWNCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjdmOWZhXCI7XG4gICAgICBicmVha0luY0J0bi5kaXNhYmxlZCAgID0gZmFsc2U7XG4gICAgICBicmVha0luY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgICA9IFwiI2Y3ZjlmYVwiO1xuICAgICAgYnJlYWtEZWNCdG4uZGlzYWJsZWQgICA9IGZhbHNlO1xuICAgICAgYnJlYWtEZWNCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yICAgPSBcIiNmN2Y5ZmFcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vzc2lvbkluY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzZXNzaW9uSW5jQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI0JDQkNCQ1wiO1xuICAgICAgc2Vzc2lvbkRlY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzZXNzaW9uRGVjQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI0JDQkNCQ1wiO1xuICAgICAgYnJlYWtJbmNCdG4uZGlzYWJsZWQgICA9IHRydWU7XG4gICAgICBicmVha0luY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgICA9IFwiI0JDQkNCQ1wiO1xuICAgICAgYnJlYWtEZWNCdG4uZGlzYWJsZWQgICA9IHRydWU7XG4gICAgICBicmVha0RlY0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgICA9IFwiI0JDQkNCQ1wiO1xuICAgIH1cbiAgfVxuXG59KSgpO1xuIl19
