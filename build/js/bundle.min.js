function addZero(e){return e>9?""+e:"0"+e}var setBreak=function(){function e(){a.textContent=5===o?"05 min":o.toString()+" min"}function t(){60===o||o++,e()}function n(){1===o||o--,e()}function i(){return o}var o=5,a=document.getElementById("break-input"),r=document.getElementById("break-increase"),s=document.getElementById("break-decrease");return r.addEventListener("click",t),s.addEventListener("click",n),e(),{getValue:i}}(),setSession=function(){function e(){a.textContent=5===o?"05 min":o.toString()+" min"}function t(){360===o||(o+=5),e()}function n(){5===o||(o-=5),e()}function i(){return o}var o=5,a=document.getElementById("session-input"),r=document.getElementById("session-increase"),s=document.getElementById("session-decrease");return r.addEventListener("click",t),s.addEventListener("click",n),e(),{getValue:i}}(),timeMarkers=function(){function e(){t.textContent=addZero(Math.floor(setSession.getValue()/5*1)).toString()+" min",n.textContent=addZero(Math.floor(setSession.getValue()/5*2)).toString()+" min",i.textContent=addZero(Math.floor(setSession.getValue()/5*3)).toString()+" min",o.textContent=addZero(Math.floor(setSession.getValue()/5*4)).toString()+" min",a.textContent=addZero(Math.floor(setSession.getValue()/5*5)).toString()+" min"}var t=document.getElementById("time-mark-0"),n=document.getElementById("time-mark-1"),i=document.getElementById("time-mark-2"),o=document.getElementById("time-mark-3"),a=document.getElementById("time-mark-4"),r=document.getElementById("session-increase"),s=document.getElementById("session-decrease");r.addEventListener("click",e),s.addEventListener("click",e)}(),timer=function(){function e(e,t){var n=document.getElementById("rect"+e),i=new RegExp("(^| )rect-animate-color($| )","g");"session"===t?n.className+=" rect-animate-color":n.className=n.className.replace(i," ")}function t(){u?(u=!1,E.style.backgroundImage="url(../img/reload-icon.svg)",i()):(u=!0,E.style.backgroundImage="url(../img/play-icon.svg)",n())}function n(){o(!1),m=!1,r=!1,clearTimeout(s),clearTimeout(d),clearTimeout(c),clearTimeout(l),displayValue=setSession.getValue();for(var t=0;t<=a;t++)e(t,"reset")}function i(){var t=setSession.getValue(),n=setBreak.getValue(),u=t/a,f=n/a,E=0,y=0;r=!0,m||o(!0),s=setInterval(function(){E<=a&&(e(E,"session"),E++)},u*g),d=setTimeout(function(){c=setInterval(function(){y<=a&&(e(y,"break"),y++)},f*g)},t*g),l=setTimeout(function(){clearTimeout(s),clearTimeout(d),clearTimeout(c),r&&i()},(t+n)*g)}function o(e){!1===e?(y.disabled=!1,I.disabled=!1,k.disabled=!1,v.disabled=!1):(y.disabled=!0,I.disabled=!0,k.disabled=!0,v.disabled=!0)}var a=364,r=!0,s=null,d=null,c=null,l=null,m=!1,u=!0,g=6e4,f=document.getElementById("timer-wrapper"),E=document.getElementById("start-btn"),y=document.getElementById("session-increase"),I=document.getElementById("session-decrease"),k=document.getElementById("break-increase"),v=document.getElementById("break-decrease");E.addEventListener("click",t),function(){for(var e=new Date,t=e.getDay(),n=0;n<t;n++){var i=document.createElement("div");i.setAttribute("id","rect"+(a+1+n)),i.className+=" rect",f.appendChild(i)}a+=t}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZXRCcmVhay5qcyIsInNldFNlc3Npb24uanMiLCJ0aW1lTWFya2Vycy5qcyIsInRpbWVyLmpzIl0sIm5hbWVzIjpbImFkZFplcm8iLCJuIiwic2V0QnJlYWsiLCJfcmVuZGVyIiwiYnJlYWtJbnB1dCIsInRleHRDb250ZW50IiwiYnJlYWtWYWx1ZSIsInRvU3RyaW5nIiwiX2luY3JlbWVudCIsIl9kZWNyZW1lbnQiLCJnZXRWYWx1ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbmNUaW1lIiwiZGVjVGltZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRTZXNzaW9uIiwic2Vzc2lvbklucHV0Iiwic2Vzc2lvblZhbHVlIiwidGltZU1hcmtlcnMiLCJtYXJrMCIsIk1hdGgiLCJmbG9vciIsIm1hcmsxIiwibWFyazIiLCJtYXJrMyIsIm1hcms0IiwidGltZXIiLCJpZCIsInR5cGUiLCJyZWN0YW5nbGUiLCJyZWciLCJSZWdFeHAiLCJjbGFzc05hbWUiLCJyZXBsYWNlIiwiX2NvdW50ZG93blN3aXRjaCIsInBsYXlCdG4iLCJzdGFydCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiX3N0YXJ0Q291bnRkb3duIiwiX3Jlc2V0VGltZXIiLCJfZGlzYWJsZUJ0bnMiLCJkaXNhYmxlIiwicGxheU9uIiwiY2xlYXJUaW1lb3V0IiwibXlTZXNzaW9uQ291bnRkb3duIiwibXlCcmVha0NvdW50ZG93biIsIm15QnJlYWtJbm5lckNvdW50ZG93biIsImxvb3BUaW1lciIsImRpc3BsYXlWYWx1ZSIsImkiLCJOX1JFQ1QiLCJzZXNzaW9uVGltZSIsImJyZWFrVGltZSIsInJlY3RTZXNzaW9uVGltZSIsInJlY3RCcmVha1RpbWUiLCJzIiwiYiIsInNldEludGVydmFsIiwibWludXRlIiwic2V0VGltZW91dCIsInNlc3Npb25JbmNCdG4iLCJkaXNhYmxlZCIsInNlc3Npb25EZWNCdG4iLCJicmVha0luY0J0biIsImJyZWFrRGVjQnRuIiwidGltZXJXcmFwcGVyIiwiZCIsIkRhdGUiLCJ3ZWVrRGF5IiwiZ2V0RGF5IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUEsRUFBQSxHQUFBQSxFQUFBLElBQUFBLEVDREEsR0FBQUMsVUFBQSxXQVlBLFFBQUFDLEtBQ0FDLEVBQUFDLFlBQUEsSUFBQUMsRUFBQSxTQUFBQSxFQUFBQyxXQUFBLE9BR0EsUUFBQUMsS0FDQSxLQUFBRixHQUFBQSxJQUNBSCxJQUdBLFFBQUFNLEtBQ0EsSUFBQUgsR0FBQUEsSUFDQUgsSUFHQSxRQUFBTyxLQUNBLE1BQUFKLEdBMUJBLEdBQUFBLEdBQUEsRUFFQUYsRUFBQU8sU0FBQUMsZUFBQSxlQUNBQyxFQUFBRixTQUFBQyxlQUFBLGtCQUNBRSxFQUFBSCxTQUFBQyxlQUFBLGlCQXlCQSxPQXZCQUMsR0FBQUUsaUJBQUEsUUFBQVAsR0FDQU0sRUFBQUMsaUJBQUEsUUFBQU4sR0FFQU4sS0FxQkFPLFNBQUFBLE1DL0JBTSxXQUFBLFdBWUEsUUFBQWIsS0FDQWMsRUFBQVosWUFBQSxJQUFBYSxFQUFBLFNBQUFBLEVBQUFYLFdBQUEsT0FHQSxRQUFBQyxLQUNBLE1BQUFVLElBQUFBLEdBQUEsR0FDQWYsSUFHQSxRQUFBTSxLQUNBLElBQUFTLElBQUFBLEdBQUEsR0FDQWYsSUFHQSxRQUFBTyxLQUNBLE1BQUFRLEdBMUJBLEdBQUFBLEdBQUEsRUFFQUQsRUFBQU4sU0FBQUMsZUFBQSxpQkFDQUMsRUFBQUYsU0FBQUMsZUFBQSxvQkFDQUUsRUFBQUgsU0FBQUMsZUFBQSxtQkF5QkEsT0F2QkFDLEdBQUFFLGlCQUFBLFFBQUFQLEdBQ0FNLEVBQUFDLGlCQUFBLFFBQUFOLEdBRUFOLEtBcUJBTyxTQUFBQSxNQy9CQVMsWUFBQSxXQWFBLFFBQUFoQixLQUNBaUIsRUFBQWYsWUFBQUwsUUFBQXFCLEtBQUFDLE1BQUFOLFdBQUFOLFdBQUEsRUFBQSxJQUFBSCxX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LE1BQ0FDLEVBQUFGLEVBQUFHLFNBRUFwQixFQUFBLEVBQUFBLEVBQUFtQixFQUFBbkIsSUFBQSxDQUNBLEdBQUFxQixHQUFBN0QsU0FBQThELGNBQUEsTUFDQUQsR0FBQUUsYUFBQSxLQUFBLFFBQUF0QixFQUFBLEVBQUFELElBQ0FxQixFQUFBdkMsV0FBQSxRQUNBa0MsRUFBQVEsWUFBQUgsR0FFQXBCLEdBQUFrQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIGZ1bmN0aW9uIGFkZFplcm8obikge1xuICAgIHJldHVybiBuID4gOSA/IFwiXCIgKyBuOiBcIjBcIiArIG47XG4gIH1cbiIsInZhciBzZXRCcmVhayA9IChmdW5jdGlvbigpe1xuICB2YXIgYnJlYWtWYWx1ZSA9IDU7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBicmVha0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWlucHV0Jyk7XG4gIHZhciBpbmNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWluY3JlYXNlJyk7XG4gIHZhciBkZWNUaW1lICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFrLWRlY3JlYXNlJyk7XG4vLyAgQmluZCBjbGljayBldmVudHNcbiAgaW5jVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9pbmNyZW1lbnQpO1xuICBkZWNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2RlY3JlbWVudCk7XG4vLyBSZW5kZXIgdGhlIGluaXRpYWwgdmFsdWUgZnJvbSBicmVha1ZhbHVlXG4gIF9yZW5kZXIoKTtcblxuICBmdW5jdGlvbiBfcmVuZGVyKCkge1xuICAgIGJyZWFrVmFsdWUgPT09IDUgPyBicmVha0lucHV0LnRleHRDb250ZW50ID0gJzA1IG1pbicgOiBicmVha0lucHV0LnRleHRDb250ZW50ID0gYnJlYWtWYWx1ZS50b1N0cmluZygpICsgJyBtaW4nO1xuICB9XG5cbiAgZnVuY3Rpb24gX2luY3JlbWVudCgpIHtcbiAgICBicmVha1ZhbHVlID09PSA2MCA/ICcnIDogYnJlYWtWYWx1ZSsrO1xuICAgIF9yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWNyZW1lbnQoKSB7XG4gICAgYnJlYWtWYWx1ZSA9PT0gMSA/ICcnIDogYnJlYWtWYWx1ZS0tO1xuICAgIF9yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFZhbHVlICgpIHtcbiAgICAgcmV0dXJuIGJyZWFrVmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgICAgZ2V0VmFsdWUgOiBnZXRWYWx1ZVxuICB9O1xuXG59KSgpO1xuIiwidmFyIHNldFNlc3Npb24gPSAoZnVuY3Rpb24oKXtcbiAgdmFyIHNlc3Npb25WYWx1ZSA9IDU7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBzZXNzaW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1pbnB1dCcpO1xuICB2YXIgaW5jVGltZSAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIGRlY1RpbWUgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uLWRlY3JlYXNlJyk7XG4vLyAgQmluZCBjbGljayBldmVudHNcbiAgaW5jVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9pbmNyZW1lbnQpO1xuICBkZWNUaW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX2RlY3JlbWVudCk7XG4vLyBSZW5kZXIgdGhlIGluaXRpYWwgdmFsdWUgZnJvbSBzZXNzaW9uVmFsdWVcbiAgX3JlbmRlcigpO1xuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSA1ID8gc2Vzc2lvbklucHV0LnRleHRDb250ZW50ID0gJzA1IG1pbicgOiBzZXNzaW9uSW5wdXQudGV4dENvbnRlbnQgPSBzZXNzaW9uVmFsdWUudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbmNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSAzNjAgPyAnJyA6IHNlc3Npb25WYWx1ZSArPSA1O1xuICAgIF9yZW5kZXIoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWNyZW1lbnQoKSB7XG4gICAgc2Vzc2lvblZhbHVlID09PSA1ID8gJycgOiBzZXNzaW9uVmFsdWUgLT0gNTtcbiAgICBfcmVuZGVyKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZSAoKSB7XG4gICAgIHJldHVybiBzZXNzaW9uVmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgICAgZ2V0VmFsdWUgOiBnZXRWYWx1ZVxuICB9O1xuXG59KSgpO1xuIiwidmFyIHRpbWVNYXJrZXJzID0gKGZ1bmN0aW9uKCl7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciBtYXJrMCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0wJyk7XG4gIHZhciBtYXJrMSAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0xJyk7XG4gIHZhciBtYXJrMiAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0yJyk7XG4gIHZhciBtYXJrMyAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay0zJyk7XG4gIHZhciBtYXJrNCAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWUtbWFyay00Jyk7XG4gIHZhciBpbmNUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIGRlY1RpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuXG4gIGluY1RpbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfcmVuZGVyKTtcbiAgZGVjVGltZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9yZW5kZXIpO1xuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG4gICAgbWFyazAudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDEpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcmsxLnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiAyKSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgICBtYXJrMi50ZXh0Q29udGVudCA9IGFkZFplcm8oTWF0aC5mbG9vcihzZXRTZXNzaW9uLmdldFZhbHVlKCkgLyA1ICogMykpLnRvU3RyaW5nKCkgKyAnIG1pbic7XG4gICAgbWFyazMudGV4dENvbnRlbnQgPSBhZGRaZXJvKE1hdGguZmxvb3Ioc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpIC8gNSAqIDQpKS50b1N0cmluZygpICsgJyBtaW4nO1xuICAgIG1hcms0LnRleHRDb250ZW50ID0gYWRkWmVybyhNYXRoLmZsb29yKHNldFNlc3Npb24uZ2V0VmFsdWUoKSAvIDUgKiA1KSkudG9TdHJpbmcoKSArICcgbWluJztcbiAgfVxufSkoKTtcbiIsInZhciB0aW1lciA9IChmdW5jdGlvbigpIHtcbiAgdmFyIE5fUkVDVCAgICAgICAgICAgICAgICA9IDM2NDtcbiAgdmFyIHBsYXlPbiAgICAgICAgICAgICAgICA9IHRydWU7XG4gIHZhciBteVNlc3Npb25Db3VudGRvd24gICAgPSBudWxsO1xuICB2YXIgbXlCcmVha0NvdW50ZG93biAgICAgID0gbnVsbDtcbiAgdmFyIG15QnJlYWtJbm5lckNvdW50ZG93biA9IG51bGw7XG4gIHZhciBsb29wVGltZXIgICAgICAgICAgICAgPSBudWxsO1xuICB2YXIgZGlzYWJsZSAgICAgICAgICAgICAgID0gZmFsc2U7XG4gIHZhciBwbGF5QnRuICAgICAgICAgICAgICAgPSB0cnVlO1xuICB2YXIgbWludXRlICAgICAgICAgICAgICAgID0gNjAwMDA7XG4vLyBDYWNoZSB0aGUgRE9NXG4gIHZhciB0aW1lcldyYXBwZXIgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVyLXdyYXBwZXInKTtcbiAgdmFyIHN0YXJ0ICAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtYnRuJyk7XG4gIHZhciBzZXNzaW9uSW5jQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24taW5jcmVhc2UnKTtcbiAgdmFyIHNlc3Npb25EZWNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbi1kZWNyZWFzZScpO1xuICB2YXIgYnJlYWtJbmNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1pbmNyZWFzZScpO1xuICB2YXIgYnJlYWtEZWNCdG4gICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhay1kZWNyZWFzZScpO1xuLy8gQmluZCBjbGljayBldmVudHNcbiAgc3RhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfY291bnRkb3duU3dpdGNoKTtcbi8vIFJlbmRlciB0aGUgdGltZXIgZGlzcGxheVxuXG5fdXBkYXRlTnVtYmVyT2ZSZWN0YW5nbGVzKCk7XG5cbiAgZnVuY3Rpb24gX3VwZGF0ZU51bWJlck9mUmVjdGFuZ2xlcygpIHtcbiAgICB2YXIgZCAgICAgICA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIHdlZWtEYXkgPSBkLmdldERheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3ZWVrRGF5OyBpKyspIHtcbiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicmVjdFwiICsgKE5fUkVDVCArIDEgKyBpKSApO1xuICAgICAgZGl2LmNsYXNzTmFtZSArPSBcIiByZWN0XCI7XG4gICAgICB0aW1lcldyYXBwZXIuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG4gICAgTl9SRUNUID0gTl9SRUNUICsgd2Vla0RheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW5kZXIoaWQsIHR5cGUpIHtcbiAgICB2YXIgcmVjdGFuZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY3QnICsgaWQpO1xuICAgIHZhciByZWcgICAgICAgPSBuZXcgUmVnRXhwKCcoXnwgKScrICdyZWN0LWFuaW1hdGUtY29sb3InICsnKCR8ICknLCdnJyk7XG5cbiAgICB0eXBlID09PSAnc2Vzc2lvbicgPyByZWN0YW5nbGUuY2xhc3NOYW1lICs9IFwiIHJlY3QtYW5pbWF0ZS1jb2xvclwiIDogcmVjdGFuZ2xlLmNsYXNzTmFtZSA9IHJlY3RhbmdsZS5jbGFzc05hbWUucmVwbGFjZShyZWcsJyAnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb3VudGRvd25Td2l0Y2goKSB7XG4gICAgaWYocGxheUJ0bikge1xuICAgICAgcGxheUJ0biA9IGZhbHNlO1xuICAgICAgc3RhcnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi4vaW1nL3JlbG9hZC1pY29uLnN2ZylcIjtcbiAgICAgIF9zdGFydENvdW50ZG93bigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGF5QnRuID0gdHJ1ZTtcbiAgICAgIHN0YXJ0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4uL2ltZy9wbGF5LWljb24uc3ZnKVwiO1xuICAgICAgX3Jlc2V0VGltZXIoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfcmVzZXRUaW1lcigpIHtcbiAgICBfZGlzYWJsZUJ0bnMoZmFsc2UpO1xuICAgIGRpc2FibGUgPSBmYWxzZTtcbiAgICBwbGF5T24gPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQobXlTZXNzaW9uQ291bnRkb3duKTtcbiAgICBjbGVhclRpbWVvdXQobXlCcmVha0NvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KG15QnJlYWtJbm5lckNvdW50ZG93bik7XG4gICAgY2xlYXJUaW1lb3V0KGxvb3BUaW1lcik7XG4gICAgZGlzcGxheVZhbHVlID0gc2V0U2Vzc2lvbi5nZXRWYWx1ZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IE5fUkVDVDsgaSsrKSB7XG4gICAgICBfcmVuZGVyKGksJ3Jlc2V0Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0Q291bnRkb3duKCkge1xuICAgIHZhciBzZXNzaW9uVGltZSAgICAgPSBzZXRTZXNzaW9uLmdldFZhbHVlKCk7XG4gICAgdmFyIGJyZWFrVGltZSAgICAgICA9IHNldEJyZWFrLmdldFZhbHVlKCk7XG4gICAgdmFyIHJlY3RTZXNzaW9uVGltZSA9IHNlc3Npb25UaW1lIC8gTl9SRUNUO1xuICAgIHZhciByZWN0QnJlYWtUaW1lICAgPSAgYnJlYWtUaW1lIC8gTl9SRUNUO1xuICAgIHZhciBzICAgICAgICAgICAgICAgPSAwO1xuICAgIHZhciBiICAgICAgICAgICAgICAgPSAwO1xuICAgIHBsYXlPbiAgICAgICAgICAgICAgPSB0cnVlO1xuXG4gICAgaWYoIWRpc2FibGUpIHtcbiAgICBfZGlzYWJsZUJ0bnModHJ1ZSk7XG4gICAgfVxuXG4gICAgbXlTZXNzaW9uQ291bnRkb3duID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICBpZihzIDw9IE5fUkVDVCkge1xuICAgICAgX3JlbmRlcihzLCdzZXNzaW9uJyk7XG4gICAgICBzKys7XG4gICAgICB9XG4gICAgfSwgcmVjdFNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIG15QnJlYWtDb3VudGRvd24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIG15QnJlYWtJbm5lckNvdW50ZG93biA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihiIDw9IE5fUkVDVCkge1xuICAgICAgICAgIF9yZW5kZXIoYiwnYnJlYWsnKTtcbiAgICAgICAgICBiKys7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlY3RCcmVha1RpbWUgKiBtaW51dGUpO1xuICAgIH0sIHNlc3Npb25UaW1lICogbWludXRlKTtcblxuICAgIGxvb3BUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQobXlTZXNzaW9uQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrQ291bnRkb3duKTtcbiAgICAgIGNsZWFyVGltZW91dChteUJyZWFrSW5uZXJDb3VudGRvd24pO1xuICAgICAgaWYgKHBsYXlPbikge1xuICAgICAgICAgX3N0YXJ0Q291bnRkb3duKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSwoc2Vzc2lvblRpbWUgKyBicmVha1RpbWUpICogbWludXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kaXNhYmxlQnRucyhkaXNhYmxlKSB7XG4gICAgaWYoZGlzYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgIHNlc3Npb25JbmNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNlc3Npb25EZWNCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGJyZWFrSW5jQnRuLmRpc2FibGVkICAgPSBmYWxzZTtcbiAgICAgIGJyZWFrRGVjQnRuLmRpc2FibGVkICAgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vzc2lvbkluY0J0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzZXNzaW9uRGVjQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIGJyZWFrSW5jQnRuLmRpc2FibGVkICAgPSB0cnVlO1xuICAgICAgYnJlYWtEZWNCdG4uZGlzYWJsZWQgICA9IHRydWU7XG4gICAgfVxuICB9XG5cbn0pKCk7XG4iXX0=
